<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="KNOW-HOW">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="KNOW-HOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Guo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>KNOW-HOW</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">KNOW-HOW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Guo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">161</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/raytroop" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;raytroop" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:raytroop@gmail.com" title="E-Mail â†’ mailto:raytroop@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/09/08/delta-sigma/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/08/delta-sigma/" class="post-title-link" itemprop="url">Delta-Sigma Data Converters</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-08 16:48:32" itemprop="dateCreated datePublished" datetime="2024-09-08T16:48:32+00:00">2024-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:08" itemprop="dateModified" datetime="2024-09-10T04:30:08+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="delta-modulator">Delta Modulator</h2>
<p><img src="/2024/09/08/delta-sigma/image-20240908173930949.png"
alt="image-20240908173930949" /> <span class="math display">\[
D_{out} = s V_F
\]</span> attenuates the low-frequency content of the signal, and
amplifies high-frequency noise.</p>
<h2 id="delta-sigma-modulator">Delta-Sigma Modulator</h2>
<p>The average output of DSM tracks the input signal</p>
<h2 id="integrator">integrator</h2>
<p><em>TODO</em> ðŸ“…</p>
<h3 id="opamp-bandwidth-slewing">opamp bandwidth &amp; slewing</h3>
<h2 id="reference">reference</h2>
<p>B. Razavi, "The Delta-Sigma Modulator [A Circuit for All Seasons],"
IEEE Solid-State Circuits Magazine, Volume. 8, Issue. 20, pp. 10-15,
Spring 2016. [<a
target="_blank" rel="noopener" href="http://www.seas.ucla.edu/brweb/papers/Journals/BRSpring16DeltaSigma.pdf">http://www.seas.ucla.edu/brweb/papers/Journals/BRSpring16DeltaSigma.pdf</a>]</p>
<p>Pavan, Shanthi, Richard Schreier, and Gabor Temes. (2016) 2016.
Understanding Delta-Sigma Data Converters. 2nd ed. Wiley.</p>
<p>R.S. Ashwin Kumar. EE698I: Mixed-signal IC design [<a
target="_blank" rel="noopener" href="https://home.iitk.ac.in/~ashwinrs/2023_EE698I.html">https://home.iitk.ac.in/~ashwinrs/2023_EE698I.html</a>]</p>
<p>R.S. Ashwin Kumar. EE698W: Analog circuits for signal processing [<a
target="_blank" rel="noopener" href="https://home.iitk.ac.in/~ashwinrs/2022_EE698W.html">https://home.iitk.ac.in/~ashwinrs/2022_EE698W.html</a>]</p>
<p>Vishal Saxena. ECE 697 Delta-Sigma Data Converter Design [<a
target="_blank" rel="noopener" href="https://www.eecis.udel.edu/~vsaxena/courses/ece697A/s10/ECE697.htm">https://www.eecis.udel.edu/~vsaxena/courses/ece697A/s10/ECE697.htm</a>]</p>
<p>-, ECE 615 Mixed Signal IC Design Spring 2016, Boise State University
[<a
target="_blank" rel="noopener" href="https://www.eecis.udel.edu/~vsaxena/courses/ece615/s16/ECE615.htm">https://www.eecis.udel.edu/~vsaxena/courses/ece615/s16/ECE615.htm</a>]</p>
<p>David A. Johns. ECE1371H - Advanced Analog Circuits - 2014 [<a
target="_blank" rel="noopener" href="https://www.eecg.toronto.edu/~johns/ece1371/ece1371.html">https://www.eecg.toronto.edu/~johns/ece1371/ece1371.html</a>]</p>
<p>Richard E. Schreier, ECE 1371 Advanced Analog Circuits - 2015 [<a
target="_blank" rel="noopener" href="http://individual.utoronto.ca/schreier/ece1371-2015.html">http://individual.utoronto.ca/schreier/ece1371-2015.html</a>]</p>
<p>Trevor Caldwell. ECE 1371S Advanced Analog Circuits - 2020 [<a
target="_blank" rel="noopener" href="http://individual.utoronto.ca/trevorcaldwell/ece1371.html">http://individual.utoronto.ca/trevorcaldwell/ece1371.html</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/09/02/slicer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/02/slicer/" class="post-title-link" itemprop="url">Comparator Noise</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-02 21:52:39" itemprop="dateCreated datePublished" datetime="2024-09-02T21:52:39+00:00">2024-09-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:09" itemprop="dateModified" datetime="2024-09-10T04:30:09+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="noise-analysis">Noise Analysis</h2>
<p><em>TODO</em> ðŸ“…</p>
<h2 id="noise-simulation">Noise Simulation</h2>
<p><img src="/2024/09/02/slicer/image-20240825215015322.png"
alt="image-20240825215015322" /></p>
<p><img src="/2024/09/02/slicer/image-20240825215134067.png"
alt="image-20240825215134067" /></p>
<blockquote>
<p>SNR during sampling region and decison region increase</p>
<p>SNR during regeneration region is consant, where noise is
critical</p>
</blockquote>
<p><span class="math display">\[
\text{SNR} = \frac{V_{o,sig}^2}{V_{o,n}^2} =
\frac{V_{i,sig}^2}{V_{i,n}^2}
\]</span></p>
<p>That is <span class="math display">\[
V_{i,n}^2 = \frac{V_{i,sig}^2}{V_{o,sig}^2}V_{o,n}^2 =
\frac{V_{o,n}^2}{A_v^2}
\]</span> where <span class="math inline">\(V_{i,sig}\)</span> is
constant signal applied to input of comparator</p>
<h2 id="offset">offset</h2>
<p><img src="/2024/09/02/slicer/image-20240825204030645.png"
alt="image-20240825204030645" /></p>
<h2 id="reference">reference</h2>
<p>T. Sepke, P. Holloway, C. G. Sodini and H. -S. Lee, "Noise Analysis
for Comparator-Based Circuits," in IEEE Transactions on Circuits and
Systems I: Regular Papers, vol. 56, no. 3, pp. 541-553, March 2009 [<a
target="_blank" rel="noopener" href="https://dspace.mit.edu/bitstream/handle/1721.1/61660/Speke-2009-Noise%20Analysis%20for%20Comparator-Based%20Circuits.pdf">https://dspace.mit.edu/bitstream/handle/1721.1/61660/Speke-2009-Noise%20Analysis%20for%20Comparator-Based%20Circuits.pdf</a>]</p>
<p>Sepke, Todd. "Comparator design and analysis for comparator-based
switched-capacitor circuits." (2006). [<a
target="_blank" rel="noopener" href="https://dspace.mit.edu/handle/1721.1/38925">https://dspace.mit.edu/handle/1721.1/38925</a>]</p>
<p>J. Kim, B. S. Leibowitz, J. Ren and C. J. Madden, "Simulation and
Analysis of Random Decision Errors in Clocked Comparators," in IEEE
Transactions on Circuits and Systems I: Regular Papers, vol. 56, no. 8,
pp. 1844-1857, Aug. 2009, doi: 10.1109/TCSI.2009.2028449. URL:<a
target="_blank" rel="noopener" href="https://people.engr.tamu.edu/spalermo/ecen689/simulation_analysis_clocked_comparators_kim_tcas1_2009.pdf">https://people.engr.tamu.edu/spalermo/ecen689/simulation_analysis_clocked_comparators_kim_tcas1_2009.pdf</a></p>
<p>Jaeha Kim, Lecture 12. Aperture and Noise Analysis of Clocked
Comparators URL:<a
target="_blank" rel="noopener" href="https://ocw.snu.ac.kr/sites/default/files/NOTE/7038.pdf">https://ocw.snu.ac.kr/sites/default/files/NOTE/7038.pdf</a></p>
<p>Rabuske, Taimur &amp; Fernandes, Jorge. (2017), Chapter 5 Noise-Aware
Synthesis and Optimization of Voltage Comparators, "Charge-Sharing SAR
ADCs for Low-Voltage Low-Power Applications"</p>
<p>Y. Luo, A. Jain, J. Wagner and M. Ortmanns, "Input Referred
Comparator Noise in SAR ADCs," in IEEE Transactions on Circuits and
Systems II: Express Briefs, vol. 66, no. 5, pp. 718-722, May 2019. [<a
target="_blank" rel="noopener" href="https://sci-hub.se/10.1109/TCSII.2019.2909429">https://sci-hub.se/10.1109/TCSII.2019.2909429</a>]</p>
<p>Art Schaldenbrand, Senior Product Manager, Keeping Things Quiet: A
New Methodology for Dynamic Comparator Noise Analysis URL:<a
target="_blank" rel="noopener" href="https://www.cadence.com/content/dam/cadence-www/global/en_US/videos/tools/custom-_ic_analog_rf_design/NoiseAnalyisposting201612Chalk%20Talk.pdf">https://www.cadence.com/content/dam/cadence-www/global/en_US/videos/tools/custom-_ic_analog_rf_design/NoiseAnalyisposting201612Chalk%20Talk.pdf</a></p>
<p>X. Tang et al., "An Energy-Efficient Comparator With Dynamic Floating
Inverter Amplifier," in IEEE Journal of Solid-State Circuits, vol. 55,
no. 4, pp. 1011-1022, April 2020</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/09/01/dcsweep/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/01/dcsweep/" class="post-title-link" itemprop="url">DC sweep & parametric sweep</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-01 09:23:20" itemprop="dateCreated datePublished" datetime="2024-09-01T09:23:20+00:00">2024-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:08" itemprop="dateModified" datetime="2024-09-10T04:30:08+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>swpuseprevic</p>
</blockquote>
<p><img src="/2024/09/01/dcsweep/image-20240901094536745.png"
alt="image-20240901094536745" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/30/fourier/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/30/fourier/" class="post-title-link" itemprop="url">Fourier Transform</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-30 20:10:15" itemprop="dateCreated datePublished" datetime="2024-08-30T20:10:15+00:00">2024-08-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:08" itemprop="dateModified" datetime="2024-09-10T04:30:08+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Below diagram show the windowing effect and sampling</p>
<p><img src="/2024/08/30/fourier/NinDFT.drawio.svg"
alt="NinDFT.drawio" /></p>
<blockquote>
<p><strong>discrete-time frequency</strong>: <span
class="math inline">\(\hat{\omega}=\omega T_s\)</span>, units are
<strong><em>radians per sample</em></strong></p>
</blockquote>
<h2 id="warmup">warmup</h2>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 38%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Continuous-time signals <span
class="math inline">\(x_c(t)\)</span></th>
<th>Discrete-time signals <span class="math inline">\(x[n]\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Aperiodic signals</strong></td>
<td style="text-align: left;">Continuous Fourier transform</td>
<td>Discrete-time Fourier transform</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Periodic signals</strong></td>
<td style="text-align: left;">Fourier series</td>
<td>Discrete Fourier transform</td>
</tr>
</tbody>
</table>
<h3 id="fourier-series-fs">Fourier Series (FS)</h3>
<p><span class="math display">\[\begin{align}
a_k &amp;= \frac{1}{T}\int_T x(t)e^{-jk(2\pi/T)) t}dt \\
x(t) &amp;= \sum_{k=-\infty}^{+\infty}a_ke^{jk(2\pi/T) t}
\end{align}\]</span></p>
<h3 id="continuous-time-fourier-transform-ctft">Continuous-Time Fourier
transform (CTFT)</h3>
<p><span class="math display">\[\begin{align}
X(j\omega) &amp;=\int_{-\infty}^{+\infty}x(t)e^{-j\omega t}dt \\
x(t)&amp;= \frac{1}{2\pi}\int_{-\infty}^{+\infty}X(j\omega)e^{j\omega
t}d\omega
\end{align}\]</span></p>
<blockquote>
<p>[<a
target="_blank" rel="noopener" href="https://www.rose-hulman.edu/class/ee/yoder/ece380/Handouts/Fourier%20Transform%20Tables%20w.pdf">https://www.rose-hulman.edu/class/ee/yoder/ece380/Handouts/Fourier%20Transform%20Tables%20w.pdf</a>]</p>
<p><img src="/2024/08/30/fourier/image-20240831104459715.png"
alt="image-20240831104459715" /></p>
</blockquote>
<h3 id="discrete-time-fourier-transform-dtft">Discrete-Time Fourier
Transform (DTFT)</h3>
<p><span class="math display">\[\begin{align}
X(e^{j\hat{\omega}})
&amp;=\sum_{n=-\infty}^{+\infty}x[n]e^{-j\hat{\omega} n} \\
x[n] &amp;=
\frac{1}{2\pi}\int_{2\pi}X(e^{j\hat{\omega}})e^{j\hat{\omega}
n}d\hat{\omega}
\end{align}\]</span></p>
<p><em>DTFT is defined for infinitely long signals as well as
finite-length signal</em></p>
<p><em>DTFT is <strong>continuous</strong> in the frequency
domain</em></p>
<p>We could verify that is the correct inverse DTFT relation by
substituting the definition of the DTFT and rearranging terms</p>
<hr />
<p><img src="/2024/08/30/fourier/image-20240831152155093.png"
alt="image-20240831152155093" /></p>
<h3 id="discrete-time-fourier-series-dtfs">Discrete-Time Fourier Series
(DTFS)</h3>
<h3 id="discrete-fourier-transform-dft">Discrete Fourier Transform
(DFT)</h3>
<blockquote>
<p>Two steps are needed to change the DTFT sum into a computable
form:</p>
<ol type="1">
<li>the continuous frequency variable <span
class="math inline">\(\hat{\omega}\)</span> must be sampled</li>
<li>the limits on the DTFT sum must be finite</li>
</ol>
</blockquote>
<p><span class="math display">\[\begin{align}
X[k] &amp;= \sum_{n=0}^{N-1}x[n]e^{-j(2\pi/N)kn}\space\space\space
k=0,1,...,N-1 \\
x[n] &amp;= \frac{1}{N}\sum_{k=0}^{N-1}X[k]e^{j(2\pi/N)kn}
\space\space\space n=0,1,...,N-1
\end{align}\]</span></p>
<p>Part of the proof is given by the following step:</p>
<p><img src="/2024/08/30/fourier/image-20240830222204470.png"
alt="image-20240830222204470" /></p>
<p><em>DFT <span class="math inline">\(X[k]\)</span> is a
<strong>sampled</strong> version of the DTFT <span
class="math inline">\(X(e^{j\hat{\omega}})\)</span>, where <span
class="math inline">\(\hat{\omega_k} = \frac{2\pi
k}{N}\)</span></em></p>
<h3 id="impulse-train">impulse train</h3>
<p><img src="/2024/08/30/fourier/image-20240830224755336.png"
alt="image-20240830224755336" /></p>
<blockquote>
<p>using time-sampling property</p>
<p><img src="/2024/08/30/fourier/impulse_train.drawio.svg"
alt="impulse_train.drawio" /></p>
</blockquote>
<h3 id="impulse-scaling">impulse scaling</h3>
<p><span class="math display">\[
\delta(\alpha t)= \frac{1}{\alpha}\delta( t)
\]</span></p>
<p>where <span class="math inline">\(\alpha\)</span> is scaling
ratio</p>
<h3 id="impulse-invariance">impulse invariance</h3>
<p><span class="math display">\[
h[n] = Th_c(nT)
\]</span></p>
<p>When <span class="math inline">\(h[n]\)</span> and <span
class="math inline">\(h_c(t)\)</span> are related through the above
equation, i.e., the impulse response of the discrete-time system is a
<em>scaled</em>, <em>sampled</em> version of <span
class="math inline">\(h_c(t)\)</span>, the <strong><em>discrete-time
system</em></strong> is said to be an <strong>impulse-invariant</strong>
version of the <strong><em>continuous-time system</em></strong></p>
<p>we have <span class="math display">\[
H(e^{j\hat{\omega}}) = H_c\left(j\frac{\hat{\omega}}{T}\right)
\]</span></p>
<h3 id="multiplication">Multiplication</h3>
<blockquote>
<p>aka <em>Modulation or Windowing Theorem</em></p>
</blockquote>
<p><em>CTFT</em>: <span class="math display">\[
x_1(t)x_2(t)\overset{FT}{\longrightarrow}\frac{1}{2\pi}X_1(\omega)*X_2(\omega)
\]</span></p>
<hr />
<p><em>DTFT</em>:</p>
<p><img src="/2024/08/30/fourier/image-20240909215833750.png"
alt="image-20240909215833750" /></p>
<h3 id="parsevals-relation">Parseval's Relation</h3>
<p><em>CTFT</em>:</p>
<p><img src="/2024/08/30/fourier/image-20240830230835764.png"
alt="image-20240830230835764" /></p>
<hr />
<p><em>DTFT</em>:</p>
<p><img src="/2024/08/30/fourier/image-20230516022936168.png"
alt="image-20230516022936168" /></p>
<hr />
<p><em>DFT</em>:</p>
<p><img src="/2024/08/30/fourier/image-20240907224043641.png"
alt="image-20240907224043641" /></p>
<h3 id="eigenfunctions-frequency-response">Eigenfunctions &amp;
frequency response</h3>
<p><em>Complex exponentials</em> are <strong>eigenfunctions</strong> of
LTI systems, that is,</p>
<p>continuous time: <span class="math inline">\(e^{j\omega t}\to
H(j\omega)e^{j\omega t}\)</span></p>
<p>discrete time: <span class="math inline">\(e^{j\hat{\omega}n} \to
H(e^{j\hat{\omega}})e^{j\hat{\omega}n}\)</span></p>
<p>where <span class="math inline">\(H(j\omega)\)</span>, <span
class="math inline">\(H(e^{j\hat{\omega}})\)</span> is <strong>frequency
response</strong> of <em>continuous-time systems</em> and
<em>discrete-time systems</em>, which is the function of <span
class="math inline">\(\omega\)</span> and <span
class="math inline">\(\hat{\omega}\)</span> <span
class="math display">\[\begin{align}
H(j\omega) &amp;= \int_{-\infty}^{+\infty}h(t)e^{-j\omega t}dt \\ \\
H(e^{j\hat{\omega}}) &amp;=
\sum_{n=-\infty}^{+\infty}h[n]e^{-j\hat{\omega} n}
\end{align}\]</span></p>
<p>The <em>frequency response</em> of <em>discrete-time LTI systems</em>
is always a <strong>periodic function</strong> of the frequency variable
<span class="math inline">\(\hat{\omega}\)</span> with period <span
class="math inline">\(2\pi\)</span></p>
<h3 id="sampling-theorem">Sampling Theorem</h3>
<p><strong>time-sampling theorem</strong>: applies to <em>bandlimited
signals</em></p>
<p><strong>spectral sampling theorem</strong>: applies to
<em>timelimited signals</em></p>
<h3 id="aliasing">Aliasing</h3>
<p>The frequencies <span class="math inline">\(f_{\text{sig}}\)</span>
and <span class="math inline">\(Nf_s \pm f_{\text{sig}}\)</span> (<span
class="math inline">\(N\)</span> integer), are
<strong>indistinguishable</strong> in the <strong>discrete time
domain</strong>.</p>
<p><img src="/2024/08/30/fourier/image-20220626000016184.png"
alt="image-20220626000016184" /></p>
<p>Given below sequence <span class="math display">\[
X[n] =A e^{j\omega T_s n}
\]</span></p>
<ol type="1">
<li><span class="math inline">\(kf_s + \Delta f\)</span></li>
</ol>
<p>â€‹ <span class="math display">\[\begin{align}
x[n] &amp;= Ae^{j\left( kf_s+\Delta f \right)2\pi T_sn} + Ae^{j\left(
-kf_s-\Delta f \right)2\pi T_sn} \\
&amp;= Ae^{j\Delta f\cdot 2\pi T_sn} + Ae^{-j\Delta f\cdot 2\pi T_sn}
\end{align}\]</span></p>
<ol start="2" type="1">
<li><span class="math inline">\(kf_s - \Delta f\)</span></li>
</ol>
<p>â€‹ <span class="math display">\[\begin{align}
x[n] &amp;= Ae^{j\left( kf_s-\Delta f \right)2\pi T_sn} + Ae^{j\left(
-kf_s+\Delta f \right)2\pi T_sn} \\
&amp;= Ae^{-j\Delta f\cdot 2\pi T_sn} + Ae^{j\Delta f\cdot 2\pi T_sn}
\end{align}\]</span></p>
<blockquote>
<p><em>complex signal</em></p>
<p><span class="math display">\[\begin{align}
A e^{j(\omega_s + \Delta \omega) T_s n} &amp;= A e^{j(k\omega_s + \Delta
\omega) T_s n} \\
A e^{j(\omega_s - \Delta \omega) T_s n} &amp;= A e^{j(k\omega_s - \Delta
\omega) T_s n}
\end{align}\]</span></p>
<p><img src="/2024/08/30/fourier/sampling_aliasing.drawio.svg"
alt="sampling_aliasing.drawio" /></p>
</blockquote>
<h2 id="spectral-sampling">spectral sampling</h2>
<p>Fourier transform of a periodic signal with Fourier series
coefficients <span class="math inline">\(\{a_k\}\)</span> can be
interpreted as a train of <em>impulses</em> occurring at the
harmonically related frequencies and for which the area of the impulse
at the <span class="math inline">\(k\)</span>th harmonic frequency <span
class="math inline">\(k\omega_0\)</span> is <span
class="math inline">\(2\pi\)</span> times the <span
class="math inline">\(k\)</span>th Fourier series coefficient <span
class="math inline">\(a_k\)</span></p>
<p><img src="/2024/08/30/fourier/image-20240830225453601.png"
alt="image-20240830225453601" /></p>
<hr />
<p><img src="/2024/08/30/fourier/image-20240831185532202.png"
alt="image-20240831185532202" /></p>
<p>spectral sampling by <span class="math inline">\(\omega_0\)</span>,
and <span class="math inline">\(\frac{2\pi}{\omega_0} \gt \tau\)</span>
<span class="math display">\[
X_{n\omega_0}(\omega) =
\sum_{n=-\infty}^{\infty}X(n\omega_0)\delta(\omega - n\omega_0)
\]</span> Periodic repetition of <span
class="math inline">\(x(t)\)</span> is <span class="math display">\[
x_{n\omega_0}(t) = \frac{1}{\omega_0}\sum_{n=-\infty}^{\infty}x(t
-n\frac{2\pi}{\omega_0})=\frac{T_0}{2\pi}\sum_{n=-\infty}^{\infty}x(t
-nT_0)
\]</span></p>
<p>Then, if <span class="math inline">\(x_{T_0} (t)\)</span>, a periodic
signal formed by repeating <span class="math inline">\(x(t)\)</span>
every <span class="math inline">\(T_0\)</span> seconds (<span
class="math inline">\(T_0 \gt \tau\)</span>â€‹), its CTFT is <span
class="math display">\[
X_{T_0}(\omega) = \frac{2\pi}{T_0} \cdot X_{n\omega_0}(\omega) =
\frac{2\pi}{T_0}\sum_{n=-\infty}^{\infty}X(n\omega_0)\delta(\omega -
n\omega_0)
\]</span> Then <span class="math inline">\(x_{T_0} (t)\)</span> can be
expressed with inverse CTFT as <span
class="math display">\[\begin{align}
x_{T_0} (t) &amp;=
\frac{1}{2\pi}\int_{-\infty}^{\infty}X_{T_0}(\omega)e^{j\omega t}d\omega
\\
&amp;= \frac{1}{T_0}\sum_{n=-\infty}^{\infty}X(n\omega_0)e^{jn\omega_0
t} =\sum_{n=-\infty}^{\infty}\frac{1}{T_0}X(n\omega_0)e^{jn\omega_0 t}
\end{align}\]</span></p>
<p>i.e. the coefficients of the Fourier series for <span
class="math inline">\(x_{T_0} (t)\)</span> is <span
class="math inline">\(D_n =\frac{1}{T_0}X(n\omega_0)\)</span></p>
<p><img src="/2024/08/30/fourier/image-20240831190258683.png"
alt="image-20240831190258683" /></p>
<blockquote>
<p>alternative method by direct Fourier series</p>
<p><img src="/2024/08/30/fourier/image-20240831193912709.png"
alt="image-20240831193912709" /></p>
</blockquote>
<h2 id="why-dft">Why DFT ?</h2>
<p><em>We can use DFT to compute DTFT samples and CTFT samples</em></p>
<p><img src="/2024/08/30/fourier/image-20240831201335531.png"
alt="image-20240831201335531" /></p>
<p><span class="math display">\[
\overline{x}(t) = \sum_{n=0}^{N_0-1}x(nT)\delta(t-nT)
\]</span> applying the Fourier transform yieds <span
class="math display">\[
\overline{X}(\omega) = \sum_{n=0}^{N_0-1}x[n]e^{-jn\omega T}
\]</span> But <span class="math inline">\(\overline{X}(\omega)\)</span>,
the Fourier transform of <span
class="math inline">\(\overline{x}(t)\)</span> is <span
class="math inline">\(X(\omega)/T\)</span>, assuming negligible
aliasing. Hence, <span class="math display">\[
X(\omega) = T\overline{X}(\omega) = T\sum_{n=0}^{N_0-1}x[n]e^{-jn\omega
T}
\]</span> and <span class="math display">\[
X(k\omega_0) =  T\sum_{n=0}^{N_0-1}x[n]e^{-jn k\omega_0 T}
\]</span> with <span class="math inline">\(\hat{\omega}_0 = \omega_0
T\)</span> <span class="math display">\[
X(k\omega_0) = T\sum_{n=0}^{N_0-1}x[n]e^{-jn k\hat{\omega}_0}
\]</span> <em>i.e. the relationship between CTFT and DFT is <span
class="math inline">\(X(k\omega_0) = T\cdot X[k]\)</span>, DFT is a tool
for computing the samples of CTFT</em></p>
<h2 id="cd">C/D</h2>
<p>Sampling with a periodic impulse train, followed by conversion to a
discrete-time sequence</p>
<p><img src="/2024/08/30/fourier/image-20240901155629500.png"
alt="image-20240901155629500" /></p>
<p><img src="/2024/08/30/fourier/image-20240830231619897.png"
alt="image-20240830231619897" /></p>
<p>The periodic impulse train is <span class="math display">\[
s(t) = \sum_{n=-\infty}^{\infty}\delta(t-nT)
\]</span> <span class="math inline">\(x_s(t)\)</span> can be expressed
as <span class="math display">\[
x_s(t) = \sum_{n=-\infty}^{\infty}x_c(nT)\delta(t-nT)
\]</span> i.e., <em>the size (area) of the impulse</em> at sample time
<span class="math inline">\(nT\)</span> is equal to the value of the
continuous-time signal at that time.</p>
<blockquote>
<p><span class="math inline">\(x_s(t)\)</span>â€‹ is, in a sense, a
<em>continuous-time</em> signal (specifically, an impulse train)</p>
<p><strong>samples of <span
class="math inline">\(x_c(t)\)</span></strong> are represented by
<em>finite numbers</em> in <span class="math inline">\(x[n]\)</span>
rather than as the <em>areas of impulses,</em> as with <span
class="math inline">\(x_s(t)\)</span></p>
</blockquote>
<h3 id="frequency-domain-representation-of-sampling">Frequency-Domain
Representation of Sampling</h3>
<p>The relationship between the Fourier transforms of the input and the
output of the impulse train modulator <span class="math display">\[
X_s(j\omega) = \frac{1}{T}\sum_{k=-\infty}^{\infty}X_c(j(\omega
-k\omega_s))
\]</span> where <span class="math inline">\(\omega_s\)</span> is the
sampling frequency in <em>radians/s</em></p>
<hr />
<p><span class="math inline">\(X(e^{j\hat{\omega}})\)</span>, the
discrete-time Fourier transform (DTFT) of the sequence <span
class="math inline">\(x[n]\)</span>, in terms of <span
class="math inline">\(X_s(j\omega)\)</span> and <span
class="math inline">\(X_c(j\omega)\)</span></p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>continuous-time Fourier transform</th>
<th>discrete-time Fourier transform</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(x_s(t) =
\sum_{n=-\infty}^{\infty}x_c(nT)\delta(t-nT)\)</span></td>
<td><span class="math inline">\(x[n]=x_c(nT)\)</span></td>
</tr>
<tr class="even">
<td><span
class="math inline">\(X_s(j\omega)=\sum_{n=-\infty}^{\infty}x_c(nT)e^{-j\omega
Tn}\)</span></td>
<td><span
class="math inline">\(X(e^{j\hat{\omega}})=\sum_{n=-\infty}^{\infty}x_c(nT)e^{-j\hat{\omega}
n}\)</span></td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
X(e^{j\omega T}) =
\frac{1}{T}\sum_{k=-\infty}^{\infty}X_c(j(\omega-k\omega_s))
\]</span> or equivalently, <span class="math display">\[
X(e^{j\hat{\omega}}) =
\frac{1}{T}\sum_{k=-\infty}^{\infty}X_c(j(\frac{\hat{\omega}}{T}-\frac{2\pi
k}{T}))
\]</span></p>
<p><span class="math inline">\(X(e^{j\hat{\omega}})\)</span> is a
frequency-scaled version of <span
class="math inline">\(X_s(j\omega)\)</span> with the frequency scaling
specified by <span class="math inline">\(\hat{\omega} =\omega
T\)</span></p>
<blockquote>
<p>Ref. 9.5 DTFT connection with the CTFT</p>
<p><img src="/2024/08/30/fourier/image-20240831154638540.png"
alt="image-20240831154638540" /></p>
<p><em>Here, <span class="math inline">\(\Omega = \omega
T\)</span></em></p>
</blockquote>
<p>The factor <span class="math inline">\(\frac{1}{T}\)</span> in <span
class="math inline">\(X(e^{j\hat{\omega}})\)</span> is
<strong>misleading</strong>, actually <span
class="math inline">\(x[n]\)</span> is not scaled by <span
class="math inline">\(\frac{1}{T}\)</span> when taking <span
class="math inline">\(\hat{\omega}\)</span> variable of integration into
account <span class="math display">\[\begin{align}
x_r[n] &amp;= \frac{1}{2\pi}
\int_{2\pi}X(e^{j\hat{\omega}})e^{j\hat{\omega} n}d\hat{\omega} \\
&amp;= \frac{1}{2\pi}\int_{2\pi}\frac{1}{T}\sum_{k=-\infty}^{+\infty}X_c
\left[ j\left(\frac{\hat{\omega}}{T} - \frac{2\pi k}{T}\right)\right]
e^{j\hat{\omega} n}d\hat{\omega} \\
&amp;\approx \frac{1}{2\pi}\frac{1}{T}\int_{2\pi}X_c
(\frac{\hat{\omega}}{T} ) e^{j\hat{\omega}  n} d\hat{\omega} \\
&amp;=\frac{1}{2\pi} \frac{1}{T}\int_{2\pi} \left[
\int_{\infty}X_c(\Phi)\delta (\Phi - \frac{\hat{\omega}}{T} )d\Phi
\right]  e^{j\hat{\omega}  n} d\hat{\omega} \\
&amp;=\frac{1}{2\pi} \frac{1}{T} \int_{\infty}X_c(\Phi)d\Phi
\int_{2\pi}\delta (\Phi - \frac{\hat{\omega}}{T} )e^{j\hat{\omega}  n}
d\hat{\omega} \\
&amp;=\frac{1}{2\pi} \frac{1}{T} \int_{\infty}X_c(\Phi)d\Phi
\int_{2\pi}T\cdot \delta (\Phi T - \hat{\omega} )e^{j\hat{\omega}  n}
d\hat{\omega} \\
&amp;=\frac{1}{2\pi} \int_{\infty}X_c(\Phi) e^{j\Phi T n}d\Phi
\end{align}\]</span></p>
<p>That is <span class="math display">\[\begin{align}
x_r[n] &amp;= \frac{1}{2\pi}\int_{2\pi} \frac{1}{T}X_c
(\frac{\hat{\omega}}{T} ) e^{j\hat{\omega}  n} d\hat{\omega} \\
&amp;= \frac{1}{2\pi} \int_{\infty}X_c(\omega) e^{j\omega T n}d\omega
\tag{31}
\end{align}\]</span></p>
<blockquote>
<p>assuming Nyquistâ€“Shannon sampling theorem is met</p>
</blockquote>
<p><span class="math display">\[\begin{align}
x_r[n] &amp;= \frac{1}{2\pi} \int_{\infty}X_c(\omega) e^{j\omega T
n}d\omega \\
&amp;= \frac{1}{2\pi} \int_{\infty}X_c(\omega) e^{j\omega t}d\omega \\
&amp;= x_c(t)
\end{align}\]</span></p>
<p>where <span class="math inline">\(t = T n\)</span>, then <span
class="math inline">\(x_r[n] = x_c(nT)\)</span></p>
<hr />
<p>Assuming <span class="math inline">\(x_c(t) = \cos(\omega_0
t)\)</span>, <span class="math inline">\(x_s(t)=
\sum_{n=-\infty}^{\infty}x_c(nT)\delta(t-nT)\)</span> and <span
class="math inline">\(x[n]=x_c(nT)\)</span>, that is <span
class="math display">\[\begin{align}
x_c(t) &amp; = \cos(\omega_0 t) \\
x_s(t) &amp;= \sum_{n=-\infty}^{\infty}\cos(\omega_0 nT)\delta(t-nT) \\
x[n] &amp;= \cos(\omega_0 nT)
\end{align}\]</span></p>
<ul>
<li><p><span class="math inline">\(X_c(j\omega)\)</span>, the Fourier
Transform of <span class="math inline">\(x_c(t)\)</span> <span
class="math display">\[
X_c(j\omega) = \pi[\delta(\omega - \omega_0) + \delta(\omega +
\omega_0)]
\]</span></p></li>
<li><p><span class="math inline">\(X(e^{j\hat{\omega}})\)</span>, the
the discrete-time Fourier transform (DTFT) of the sequence <span
class="math inline">\(x[n]\)</span> <span class="math display">\[
X(e^{j\hat{\omega}}) =\sum_{k=-\infty}^{+\infty}\pi[\delta(\hat{\omega}
- \hat{\omega}_0-2\pi k) + \delta(\hat{\omega} + \hat{\omega}_0-2\pi k)]
\]</span></p></li>
<li><p><span class="math inline">\(X_s(j\omega)\)</span>, the Fourier
Transform of <span class="math inline">\(x_s(t)\)</span> <span
class="math display">\[
X_s(j\omega)= \frac{1}{T}\sum_{k=-\infty}^{+\infty}\pi[\delta(\omega -
\omega_0-k\omega_s) + \delta(\omega + \omega_0-k\omega_s)]
\]</span></p></li>
</ul>
<p>Express <span class="math inline">\(X(e^{j\hat{\omega}})\)</span> in
terms of <span class="math inline">\(X_s(j\omega)\)</span> and <span
class="math inline">\(X_c(j\omega)\)</span> <span
class="math display">\[
X(e^{j\hat{\omega}}) =
\frac{1}{T}\sum_{k=-\infty}^{+\infty}\pi[\delta(\frac{\hat{\omega}}{T} -
\omega_0-k\omega_s) + \delta(\frac{\hat{\omega}}{T} +
\omega_0-k\omega_s)]
\]</span> Inverse <span
class="math inline">\(X(e^{j\hat{\omega}})\)</span> <span
class="math display">\[\begin{align}
x_r[n] &amp;= \frac{1}{2\pi} \int_{2\pi}X(e^{j\hat{\omega}})
e^{j\hat{\omega} n} d\hat{\omega} \\
&amp;= \frac{1}{2\pi}\int_{2\pi} \pi[\delta(\frac{\hat{\omega}}{T} -
\omega_0) + \delta(\frac{\hat{\omega}}{T} + \omega_0)]e^{j\hat{\omega}
n} d\frac{\hat{\omega}}{T} \\
&amp;= \frac{1}{2\pi}\int_{2\pi} \pi[\delta(\frac{\hat{\omega}}{T} -
\omega_0)e^{j\hat{\omega}_0 n} + \delta(\frac{\hat{\omega}}{T} +
\omega_0)e^{-j\hat{\omega}_0 n}] d\frac{\hat{\omega}}{T} \\
&amp;= \frac{1}{2}[ e^{j\hat{\omega}_0 n}\int_{2\pi}
[\delta(\frac{\hat{\omega}}{T} - \omega_0)d\frac{\hat{\omega}}{T} +
e^{-j\hat{\omega}_0 n}\int_{2\pi} [\delta(\frac{\hat{\omega}}{T} +
\omega_0)d\frac{\hat{\omega}}{T}] \\
&amp;= \frac{1}{2}[ e^{j\hat{\omega}_0 n} + e^{-j\hat{\omega}_0 n} ] \\
&amp;= \cos(\hat{\omega}_0 n)
\end{align}\]</span></p>
<p>or follow EQ.(31)</p>
<p><span class="math display">\[\begin{align}
x_r[n] &amp;= \frac{1}{2\pi} \int_{\infty}X_c(\omega) e^{j\omega T
n}d\omega \\
&amp;= \frac{1}{2\pi} \int_{\infty} \pi[\delta(\omega - \omega_0) +
\delta(\omega + \omega_0)]e^{j\omega T n}d\omega \\
&amp;= \frac{1}{2}(e^{j\omega_0 T n}+e^{-j\omega_0 T n}) \\
&amp;= \cos(\hat{\omega}_0 n)
\end{align}\]</span></p>
<p>where <span class="math inline">\(\hat{\omega}_0 = \omega_0
T\)</span></p>
<h2 id="dc">D/C</h2>
<p><img src="/2024/08/30/fourier/image-20240831161852787.png"
alt="image-20240831161852787" /></p>
<p><img src="/2024/08/30/fourier/image-20240831162625943.png"
alt="image-20240831162625943" /></p>
<p><img src="/2024/08/30/fourier/image-20240831162559492.png"
alt="image-20240831162559492" /></p>
<h2 id="zero-padding">zero padding</h2>
<p>This option increases <span class="math inline">\(N_0\)</span>, the
number of samples of <span class="math inline">\(x(t)\)</span>, by
adding dummy samples of 0 value. This addition of dummy samples is known
as zero padding.</p>
<p>We should keep in mind that even if the fence were transparent, we
would see a reality distorted by <strong>aliasing</strong>.</p>
<p>Zero padding only allows us to look at more samples of that imperfect
reality</p>
<h2 id="transfer-function">Transfer function</h2>
<h3 id="sampled-impulse-response">sampled impulse response</h3>
<p>The below equation demonstrates how to obtain <strong>continuous
Fourier Transform</strong> from <strong>DTFT</strong> . <span
class="math display">\[
X_c(\omega) = T \cdot X(\omega)
\]</span></p>
<blockquote>
<p><span class="math inline">\(T\)</span> is sample period, follow
previous equation</p>
</blockquote>
<h3 id="useful-functions">useful functions</h3>
<ul>
<li><p>using <code>fft</code></p>
<p>The outputs of the DFT are <strong>samples</strong> of the
DTFT</p></li>
<li><p>using <code>freqz</code></p>
<p>modeling as <strong>FIR filter</strong>, and the impulse response
sequence of an FIR filter is the same as the sequence of filter
coefficients, we can express the frequency response in terms of either
the filter coefficients or the impulse response</p>
<blockquote>
<p><code>fft</code> is used in <code>freqz</code> internally</p>
</blockquote></li>
</ul>
<h3 id="example">Example</h3>
<p><strong>Question</strong>:</p>
<p>How to obtain continuous system transfer function from sampled
impulse</p>
<p><strong>Answer</strong>:</p>
<p>using above mentioned functions</p>
<hr />
<blockquote>
<p>First order lowpass filter with 3-dB frequency
<strong>1Hz</strong></p>
</blockquote>
<p><img src="/2024/08/30/fourier/image-20220501020004068.png"
alt="image-20220501020004068" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">clear all;</span><br><span class="line">clc;</span><br><span class="line"></span><br><span class="line"><span class="comment">%% continuous system</span></span><br><span class="line">s = tf(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">h = <span class="number">2</span>*<span class="built_in">pi</span>/(<span class="number">2</span>*<span class="built_in">pi</span>+s);</span><br><span class="line">[mag, phs, wout] = bode(h);</span><br><span class="line">fct = wout(:)/<span class="number">2</span>/<span class="built_in">pi</span>;</span><br><span class="line">Hct_dB = <span class="number">20</span>*<span class="built_in">log10</span>(mag(:));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fstep = <span class="number">0.01</span>;           <span class="comment">% freq resolution</span></span><br><span class="line">fnyqst = <span class="number">100</span>;</span><br><span class="line">Ts = <span class="number">1</span>/(<span class="number">2</span>*fnyqst);</span><br><span class="line">Fs = <span class="number">1</span>/Ts;              <span class="comment">% sampling freq</span></span><br><span class="line">Ns = <span class="built_in">ceil</span>(Fs/fstep);    <span class="comment">% samping points</span></span><br><span class="line">fstep = Fs/Ns;          <span class="comment">% update fstep</span></span><br><span class="line">t = (<span class="number">0</span>:Ns<span class="number">-1</span>)*Ts;        <span class="comment">% sampling time points</span></span><br><span class="line"></span><br><span class="line">y = impulse(h, t);      <span class="comment">% impulse resp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% modelling as discrete system</span></span><br><span class="line">Y = fft(y);                 <span class="comment">% dft</span></span><br><span class="line">Hfft = Y * Ts;              <span class="comment">% !!! multiply Ts</span></span><br><span class="line">Hfft_dB = <span class="number">20</span>*<span class="built_in">log10</span>(<span class="built_in">abs</span>(Hfft(<span class="number">1</span>:Ns/<span class="number">2</span>+<span class="number">1</span>)));</span><br><span class="line">ffft = (<span class="number">1</span>:Ns/<span class="number">2</span>+<span class="number">1</span>)*fstep - fstep;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Hfir, ffir] = freqz(y, <span class="number">1</span>, [], <span class="number">1</span>/Ts);   <span class="comment">% modelling as FIR</span></span><br><span class="line">Hfir = Hfir * Ts;           <span class="comment">% !!! multiply Ts</span></span><br><span class="line">Hfir_dB = <span class="number">20</span>*<span class="built_in">log10</span>(<span class="built_in">abs</span>(Hfir));</span><br><span class="line"></span><br><span class="line"><span class="comment">%% plot</span></span><br><span class="line">semilogx(fct, Hct_dB, <span class="string">&#x27;k&#x27;</span>, ffft, Hfft_dB, <span class="string">&#x27;r.-&#x27;</span>, ffir, Hfir_dB, <span class="string">&#x27;b--&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;bode(s)&#x27;</span>, <span class="string">&#x27;fft&#x27;</span>, <span class="string">&#x27;FIR model&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Freq(Hz)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;dB&#x27;</span>);</span><br><span class="line">xlim([<span class="number">1e-2</span> <span class="number">1e2</span>]);</span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">&#x27;frequency response of different methods&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="gotcha">Gotcha</h2>
<p>A remarkable fact of linear systems is that the <strong>complex
exponentials</strong> are <strong>eigenfunctions</strong> of a linear
system, as the system output to these inputs equals the input multiplied
by a constant factor.</p>
<ul>
<li>Both amplitude and phase may change</li>
<li>but the frequency does not change</li>
</ul>
<blockquote>
<p>For an input <span class="math inline">\(x(t)\)</span>, we can
determine the output through the use of the convolution integral, so
that with <span class="math inline">\(x(t) = e^{st}\)</span> <span
class="math display">\[\begin{align}
y(t) &amp;= \int_{-\infty}^{+\infty}h(\tau)x(t-\tau)d\tau \\
&amp;= \int_{-\infty}^{+\infty} h(\tau) e^{s(t-\tau)}d\tau \\
&amp;= e^{st}\int_{-\infty}^{+\infty} h(\tau) e^{-s\tau}d\tau \\
&amp;= e^{st}H(s)
\end{align}\]</span></p>
</blockquote>
<p>Take the input signal to be a complex exponential of the form <span
class="math inline">\(x(t)=Ae^{j\phi}e^{j\omega t}\)</span></p>
<p><span class="math display">\[\begin{align}
y(t) &amp;= h(t)*x(t) \\
&amp;= H(j\omega)Ae^{j\phi}e^{j\omega t}
\end{align}\]</span></p>
<p>The frequency response at <span
class="math inline">\(-\omega\)</span> is the <strong>complex
conjugate</strong> of the frequency response at <span
class="math inline">\(+\omega\)</span>, given <span
class="math inline">\(h(t)\)</span> is real</p>
<p><span class="math display">\[\begin{align}
H^*(t) &amp;= \left(\int_{-\infty}^{+\infty}h(t)e^{-j\omega
t}dt\right)^* \\
&amp;= \int_{-\infty}^{+\infty}h^*(t)e^{+j\omega t}dt \\
&amp;= \int_{-\infty}^{+\infty}h(t)e^{-j(-\omega t)}dt \\
&amp;= H(-j\omega)
\end{align}\]</span></p>
<p>The <strong>real cosine signal</strong> is actually composed of two
<strong>complex exponential signals</strong>: one with positive
frequency and the other with negative <span class="math display">\[
cos(\omega t + \phi) = \frac{e^{j(\omega t + \phi)} + e^{-j(\omega t +
\phi)}}{2}
\]</span></p>
<p>The sinusoidal response is the sum of the complex-exponential
response at the positive frequency <span
class="math inline">\(\omega\)</span> and the response at the
corresponding negative frequency <span
class="math inline">\(-\omega\)</span> because of LTI systems's
superposition property</p>
<ul>
<li><p>input: <span class="math display">\[\begin{align}
x(t) &amp;= A cos(\omega t + \phi) \\
&amp;= \frac{1}{2}Ae^{\phi}e^{\omega t} +
\frac{1}{2}Ae^{-\phi}e^{-\omega t}
\end{align}\]</span></p></li>
<li><p>output with <span
class="math inline">\(H(j\omega)=Ge^{j\theta}\)</span>: <span
class="math display">\[\begin{align}
y(t) &amp;= H(j\omega)\frac{1}{2}Ae^{\phi}e^{\omega t}
+  H(-j\omega)\frac{1}{2}Ae^{-\phi}e^{-\omega t} \\
&amp;= Ge^{j\theta}\frac{1}{2}Ae^{\phi}e^{\omega t} +
Ge^{-j\theta}\frac{1}{2}Ae^{-\phi}e^{-\omega t} \\
&amp;= GAcos(\omega t + \phi + \theta)
\end{align}\]</span></p></li>
</ul>
<p>Its phase shift is <span class="math inline">\(\theta\)</span> and
gain is <span class="math inline">\(G\)</span>, which is same with <span
class="math inline">\(H(j\omega)\)</span>.</p>
<h2 id="reference">reference</h2>
<p>Alan V Oppenheim, Ronald W. Schafer. Discrete-Time Signal Processing,
3rd edition</p>
<p>B.P. Lathi, Roger Green. Linear Systems and Signals (The Oxford
Series in Electrical and Computer Engineering) 3rd Edition</p>
<p>Alan V. Oppenheim, Alan S. Willsky, and S. Hamid Nawab. 1996. Signals
&amp; systems (2nd ed.)</p>
<p>James H. McClellan, Ronald Schafer, and Mark Yoder. 2015. DSP First
(2nd. ed.). Prentice Hall Press, USA</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/20/async-sar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/20/async-sar/" class="post-title-link" itemprop="url">Asynchronous SAR ADC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-20 21:06:29" itemprop="dateCreated datePublished" datetime="2024-08-20T21:06:29+00:00">2024-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:08" itemprop="dateModified" datetime="2024-09-10T04:30:08+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>assign the amount of time based on the time needed for each step</p>
</blockquote>
<h2 id="pipeline-adc">pipeline ADC</h2>
<p><img src="/2024/08/20/async-sar/image-20240821212812683.png"
alt="image-20240821212812683" /></p>
<p><img src="/2024/08/20/async-sar/pipelineADC.drawio.svg"
alt="pipelineADC.drawio" /></p>
<p><span class="math display">\[
V_{N-1} = \sum_{i=0}^{N-2} B[i]\frac{1}{2^{N-i}}+ B[N-1]\frac{1}{2}
\]</span> Compare with <span class="math inline">\(\frac{1}{2}\)</span>,
and determine <span class="math inline">\(B[N-1]\)</span> <span
class="math display">\[\begin{align}
V_{N-2}  &amp;= \left(V_{N-1} - B[N-1]\frac{1}{2}\right)\cdot 2 \\
&amp;= \left(\sum_{i=0}^{N-1} B[i]\frac{1}{2^{N-i}} -
B[N-1]\frac{1}{2}\right) \cdot 2 \\
&amp;= \sum_{i=0}^{N-2} B[i]\frac{1}{2^{N-i}} \cdot 2 \\
&amp;= \sum_{i=0}^{N-3} B[i]\frac{1}{2^{N-i}}\cdot 2 + B[N-2]\frac{1}{2}
\end{align}\]</span></p>
<p>On your intuition, input can be expressed as below <span
class="math display">\[\begin{align}
V_{N-1} &amp;= \sum_{i=0}^{N-1} B[i] \frac{1}{2}\cdot 2^{i-N+1} \\
&amp;= B[N-1]\frac{1}{2} + B[N-2]\frac{1}{2}\cdot 2^{-1} +
B[N-3]\frac{1}{2}\cdot 2^{-2 }...
\end{align}\]</span></p>
<p>It divides the process into several comparison stages, the number of
which is proportional to the number of bits</p>
<blockquote>
<p>Due to the pipeline structure of both analog and digital signal path,
inter-stage <strong>residue amplification</strong> is needed which
consumes considerable power and limits high speed operation</p>
</blockquote>
<h3 id="reduced-residue-amplification-gain">reduced residue
amplification gain</h3>
<h2 id="synchronous-sar-adc">Synchronous SAR ADC</h2>
<p>It also divides a full conversion into several comparison stages in a
way similar to the <em>pipeline ADC</em>, except the algorithm is
executed <strong>sequentially</strong> rather than in <em>parallel</em>
as in the pipeline case.</p>
<p>However, the sequential operation of the SA algorithm has
traditionally been a <em>limitation in achieving high-speed
operation</em></p>
<p><img src="/2024/08/20/async-sar/image-20240821215815566.png"
alt="image-20240821215815566" /></p>
<ul>
<li>a clock running at least <span class="math inline">\((N + 1) \cdot
F_s\)</span> is required for an <span
class="math inline">\(N\)</span>-bit converter with conversion rate of
<span class="math inline">\(F_s\)</span></li>
<li>every clock cycle has to tolerate the worst case comparison
time</li>
<li>every clock cycle requires margin for the clock jitter</li>
</ul>
<blockquote>
<p>The power and speed limitations of a synchronous SA design comes
largely from the <em>high-speed internal clock</em></p>
</blockquote>
<h3 id="non-binary-successive-approximation">Non-Binary Successive
Approximation</h3>
<p>The <em>overlapped search range</em> compensates for wrong decisions
made in earlier stages as long as they are within the error tolerance
range</p>
<blockquote>
<p>Kuttner, Franz. â€œA 1.2V 10b 20MSample/s non-binary successive
approximation ADC in 0.13/spl mu/m CMOS.â€ <em>2002 IEEE International
Solid-State Circuits Conference. Digest of Technical Papers (Cat.
No.02CH37315)</em> 1 (2002): 176-177 vol.1.</p>
</blockquote>
<h3 id="bottom-plate-sampling-vs.-top-plate-sampling">Bottom Plate
Sampling vs. Top Plate Sampling</h3>
<h2 id="asynchronous-processing">Asynchronous processing</h2>
<p><img src="/2024/08/20/async-sar/image-20240821230528349.png"
alt="image-20240821230528349" /></p>
<p>a global clock running at the sample rate is still used for an
<strong>uniform sampling</strong></p>
<blockquote>
<p>The concept of asynchronous processing is to trigger the internal
comparison from MSB to LSB like <em>dominoes</em>.</p>
</blockquote>
<h2 id="reference">reference</h2>
<p>S. -W. M. Chen and R. W. Brodersen, "A 6-bit 600-MS/s 5.3-mW
Asynchronous ADC in 0.13-Î¼m CMOS," in <em>IEEE Journal of Solid-State
Circuits</em>, vol. 41, no. 12, pp. 2669-2680, Dec. 2006</p>
<p>Shuo-Wei Chen, Power Efficient System and A/D Converter Design for
Ultra-Wideband Radio [<a
target="_blank" rel="noopener" href="http://www2.eecs.berkeley.edu/Pubs/TechRpts/2006/EECS-2006-71.pdf">http://www2.eecs.berkeley.edu/Pubs/TechRpts/2006/EECS-2006-71.pdf</a>]</p>
<p>Andrea Baschirotto, "T6: SAR ADCs" ISSCC2009</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/18/mdl-sv/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/18/mdl-sv/" class="post-title-link" itemprop="url">Modeling and Simulation in SystemVerilog</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-18 18:27:17" itemprop="dateCreated datePublished" datetime="2024-08-18T18:27:17+00:00">2024-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:09" itemprop="dateModified" datetime="2024-09-10T04:30:09+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="single-pole-filter-complex-conjugate-pole-pair">Single-Pole
Filter &amp; Complex Conjugate Pole pair</h2>
<blockquote>
<p>Single-Pole Filter and Complex Conjugate Pole pair in Event-Driven
PWL model</p>
</blockquote>
<p><strong>Real number modeling</strong> of analog circuits in hardware
description languages (HDLs) has become more common as a part of
mixed-signal SoC validation. <strong>Piecewise linear (PWL)</strong>
waveform approximation represent analog signals and <strong>dynamically
schedule the events</strong> for approximating the signal waveform to
PWL segments with a well controlled error bound.</p>
<p><img src="/2024/08/18/mdl-sv/image-20220310000010013.png"
alt="image-20220310000010013" /></p>
<p>Definition of a piecewise liner (PWL) waveform using struct in
Systemverilog</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="keyword">real</span> y; <span class="comment">// signal offset</span></span><br><span class="line">    <span class="keyword">real</span> slope; <span class="comment">// signal slope</span></span><br><span class="line">    <span class="keyword">real</span> t0;	<span class="comment">// time offset</span></span><br><span class="line">&#125; pwl; <span class="comment">// pwl datatype</span></span><br></pre></td></tr></table></figure>
<h3 id="when-to-update-piecewise-model">When to update piecewise
model</h3>
<ol type="1">
<li>model parameter update once new input come in</li>
<li>error is greater than user-define tolerance <span
class="math inline">\(e_{tol}\)</span>, trigger by <span
class="math inline">\(\Delta T\)</span></li>
</ol>
<p><img src="/2024/08/18/mdl-sv/tolerance_error.drawio.svg"
alt="tolerance_error.drawio" /></p>
<h3 id="dynamic-time-step-control">Dynamic Time Step Control</h3>
<p>When approximating a function <span
class="math inline">\(y(t)\)</span> to a <strong>piecewise linear
segment</strong> for the interval <span class="math inline">\(t_0 \le
t_0 + \Delta t\)</span>, the approximation error <span
class="math inline">\(err\)</span> is bounded by <span
class="math display">\[
\left| err \right| \le \frac{1}{8}\cdot \Delta t^2 \cdot \max(\left|
\ddot{y(t)} \right|)
\]</span> Using Rolle's theorem for the interval <span
class="math inline">\(t_0 \le t_0 + \Delta t\)</span>, the needed time
step <span class="math inline">\(\Delta t\)</span> is givend by <span
class="math display">\[
\Delta t(t=t_0) = \sqrt{\frac{8\cdot e_{tol}}{\max(\left| \ddot{y(t)}
\right|)}}
\]</span></p>
<h3 id="single-pole-filter-model">Single-Pole Filter Model</h3>
<p>The <strong>ramp</strong> input <span
class="math inline">\(X(s)\)</span>, the single pole system Laplace
s-domain <span class="math inline">\(H(s)\)</span> and the output
response <span class="math inline">\(Y(s)\)</span>, <span
class="math display">\[\begin{align}
X(s) &amp;= \frac{a}{s} +\frac{b}{s^2} \\
H(s) &amp;= \frac{Y(s)}{X(s)} = \frac{1}{1+\frac{s}{\omega_{1}}} \\
Y(s) &amp;= X(s) \cdot H(s)
\end{align}\]</span></p>
<p>Time domain of ramp input shown as below <span
class="math display">\[
x(t) = a +b \cdot t
\]</span></p>
<ol type="1">
<li>The output transfer function <span
class="math display">\[\begin{align}
Y(s) &amp;= X(s) \cdot H(s) \\
&amp;= \frac{\omega_1}{\omega_1+s}\cdot X
\end{align}\]</span></li>
</ol>
<p><span class="math display">\[
Y\omega_1 + sY = \omega_1 X
\]</span></p>
<ol start="2" type="1">
<li>its differential equation</li>
</ol>
<p><span class="math display">\[
y(t) \cdot \omega_1+\frac{d y(t)}{dt} = \omega_1 \cdot x(t)
\]</span></p>
<ol start="3" type="1">
<li>Laplace transfrom two side of the above equation, <span
class="math inline">\(y_0\)</span> is initial conditon of output, <span
class="math inline">\(x_0=0\)</span></li>
</ol>
<p><span class="math display">\[
Y\omega_1 + sY-y_0 = \omega_1 \cdot X
\]</span></p>
<p>Solving <span class="math inline">\(Y(s)\)</span> <span
class="math display">\[\begin{align}
Y &amp;= \frac{y_0}{\omega_1+s}+\frac{\omega_1}{\omega_1+s}\cdot X \\
&amp;= \frac{y_0}{\omega_1+s}+\frac{\omega_1}{\omega_1+s}\cdot
(\frac{a}{s}+\frac{b}{s^2}) \\
&amp;= \frac{y_0}{\omega_1+s}+\frac{\omega_1}{\omega_1+s}\cdot
\frac{a}{s}+\frac{\omega_1}{\omega_1+s}\cdot\frac{b}{s^2}
\end{align}\]</span></p>
<ol start="4" type="1">
<li>inverse Laplace transform</li>
</ol>
<p><span class="math display">\[
y(t) = y_0e^{-\omega_1t}+(a-a\cdot e^{-\omega_1t})+(b\cdot
t-\frac{b}{\omega_1}+\frac{b}{\omega_1}\cdot e^{-\omega_1 t})
\]</span></p>
<blockquote>
<p>step-1 transfer function in Laplace s-domain, which
<strong>don't</strong> initial conditon and is only steady response.</p>
<p>step-2 differential equation</p>
<p>step-3 Laplace transform of <span
class="math inline">\(Y(s)\)</span>, (the initial conditon of input
<span class="math inline">\(X(s)\)</span> is zero, that of <span
class="math inline">\(Y(s)\)</span> is explicit)</p>
<p>step-4 inverse Laplace transform, with the help of Laplace transform
table or matlab <code>syms</code> and <code>ilaplace</code> function</p>
</blockquote>
<p><span class="math inline">\(y(t)\)</span> has a continuous second
derivative <span class="math inline">\(\ddot{y(t)}\)</span> <span
class="math display">\[
\ddot{y(t)} =(-a+\frac{b}{\omega_1}+y_0)\cdot \omega_1^2\cdot
e^{-\omega_1t}
\]</span> It's obvious <span class="math inline">\(\left| \ddot{y(t)}
\right|\)</span> is a decaying function and thus the maximum value is
<span class="math inline">\(\left| \ddot{y(t_0)} \right|\)</span> for
the interval <span class="math inline">\(t_0 \le t_0 + \Delta
t\)</span>. The time step <span class="math inline">\(\Delta t\)</span>
for the error tolerance <span class="math inline">\(e_{tol}\)</span>:
<span class="math display">\[
\Delta t(t=t_0) = \sqrt{\frac{8\cdot e_{tol}}{\left| \ddot{y(t_0)}
\right|}}
\]</span></p>
<h3 id="complex-conjugate-pole-pair">Complex Conjugate Pole pair</h3>
<p><span class="math display">\[
H(s) = \frac{r}{s+\omega_p} + \frac{r^*}{s+\omega_p^*}
\]</span></p>
<p>where <span class="math inline">\(\omega_p\)</span> and <span
class="math inline">\(r\)</span> are complex numbers, <span
class="math inline">\(r=r_r+jr_i\)</span>, <span
class="math inline">\(\omega_p=\omega_{pr}+j\omega_{pi}\)</span></p>
<p>Follow the procedure as above single pole <span
class="math display">\[
\frac{Y(s)}{X(s)} = \frac{s\cdot r_{cs}+e}{s^2+s\cdot \omega_{p\_cs}+f}
\]</span> where <span class="math inline">\(r_{cs}=r+r^*\)</span>, <span
class="math inline">\(\omega_{p\_cs}=\omega_p+\omega_p^*\)</span> and
<span class="math inline">\(e=r\omega_p^*+r^*\omega_p\)</span>, <span
class="math inline">\(f=\omega_p\omega_p^*\)</span> implies <span
class="math display">\[
s^2Y(s)+s\omega_{p\_cs}Y(s)+fY(s)=(s\cdot r_{cs}+e)X(s)
\]</span> or a differential equation <span class="math display">\[
\frac{d^2y(t)}{dt^2}+\omega_{p\_cs}\frac{dy(t)}{dt}+fy(t)=r_{cs}\frac{dx(t)}{dt}+e\cdot
x(t)
\]</span> Taking Laplace transform with initial conditions <span
class="math inline">\(y_0\)</span>, <span
class="math inline">\(\dot{y_0}\)</span> and <span
class="math inline">\(x_0=0\)</span>, <span class="math display">\[
s^2-sy_0-\dot{y_0}+\omega_{p\_cs}(sY(s)-y_0)+f\cdot y(t) = r_{cs}\cdot
(sX(s)-0)+e\cdot X(s)
\]</span> Solving for <span class="math inline">\(Y(s)\)</span> <span
class="math display">\[
Y(s)=\frac{s\cdot
y_0+\dot{y_0}+\omega_{p\_cs}y_0}{s^2+s\cdot{\omega_{p\_cs}}+f}+\frac{s\cdot{r_{cs}}+e}{s^2+s\cdot{\omega_{p\_cs}}+f}X(s)
\]</span> With an ramp input, height <span
class="math inline">\(a\)</span>, slope <span
class="math inline">\(b\)</span>, i.e. <span
class="math inline">\(X(s)=\frac{a}{s}+\frac{b}{s^2}\)</span> <span
class="math display">\[
Y(s)=\frac{s\cdot
y_0+\dot{y_0}+\omega_{p\_cs}y_0}{s^2+s\cdot{\omega_{p\_cs}}+f}+\frac{s\cdot{r_{cs}}+e}{s^2+s\cdot{\omega_{p\_cs}}+f}(\frac{a}{s}+\frac{b}{s^2})
\]</span> After inverse Laplace transform, we can get total response
<span class="math display">\[
y(t)=e^{-\omega_{pr}t}\cdot \left[ y_0\cdot
\cos(\omega_{pi}t)+\frac{\dot{y_0}+y_0\omega_{pr}}{\omega_{pi}}\sin(\omega_{pi}t)+D\cdot
\cos(\omega_{pi}t)+\frac{C-D\cdot{\omega_{pr}}}{\omega_{pi}}\sin(\omega_{pi}t)
\right]+B+A\cdot{t}
\]</span> where <span class="math display">\[\begin{align}
A &amp;= \frac{e\cdot{b}}{f} \\
B &amp;= \frac{r_{cs}\cdot{b}+a\cdot{e}-A\cdot{\omega_{p\_{cs}}}}{f} \\
C &amp;= a\cdot{r_{cs}}-A-B\cdot{\omega_{p\_cs}} \\
D &amp;= -B
\end{align}\]</span></p>
<p>As a double check, note that at <span
class="math inline">\(t=0\)</span>, <span class="math display">\[
y(0)=\left[ y_0 + D \right]+B=y_0
\]</span></p>
<p>To derive derivative, we first assume <span class="math display">\[
y_0\cdot
\cos(\omega_{pi}t)+\frac{\dot{y_0}+y_0\omega_{pr}}{\omega_{pi}}\sin(\omega_{pi}t)+D\cdot
\cos(\omega_{pi}t)+\frac{C-D\cdot{\omega_{pr}}}{\omega_{pi}}\sin(\omega_{pi}t)
= \alpha \cdot{\cos(\omega_{pi}t+\phi)}
\]</span> The above equation implies <span
class="math display">\[\begin{align}
y_0+D &amp;= \alpha\cdot{\cos(\phi)} \\
\frac{\dot{y_0}+y_0\omega_{pr}}{\omega_{pi}}+\frac{C-D\cdot{\omega_{pr}}}{\omega_{pi}}
&amp;= -\alpha\cdot{\sin(\phi)}
\end{align}\]</span> Then <span class="math display">\[
\alpha^2=(y_0+D)^2+\left(\frac{\dot{y_0}+y_0\omega_{pr}}{\omega_{pi}}+\frac{C-D\cdot{\omega_{pr}}}{\omega_{pi}}
\right)^2
\]</span> And <span class="math inline">\(\alpha\)</span> can be used to
estimate time step size. The total response is <span
class="math display">\[
y(t)=e^{-\omega_{pr}t}\cdot \alpha
\cdot{\cos(\omega_{pi}t+\phi)}+B+A\cdot{t}
\]</span> It's second derivative is <span class="math display">\[
\ddot{y(t)} = \alpha\left[
(\omega_{pr}^2-\omega_{pi}^2)e^{-\omega_{pr}t}\cos(\omega_{pi}t+\phi)+2\cdot
\omega_{pr}\omega_{pi}e^{-\omega_{pr}t}\sin(\omega_{pi}t+\phi) \right]
\]</span> Absolute value <span class="math display">\[
\left| \ddot{y(t)} \right| = \left| \alpha \right| \left|
(\omega_{pr}^2-\omega_{pi}^2)e^{-\omega_{pr}t}\cos(\omega_{pi}t+\phi)+2\cdot
\omega_{pr}\omega_{pi}e^{-\omega_{pr}t}\sin(\omega_{pi}t+\phi) \right|
\]</span> Define new function <span
class="math inline">\(g_0(t)\)</span> <span class="math display">\[
g_0(t) = \left| \alpha \right| \left|
(\omega_{pr}^2-\omega_{pi}^2)e^{-\omega_{pr}t}\cos(\omega_{pi}t+\phi)
\right|+2\cdot |\alpha| \left|
\omega_{pr}\omega_{pi}e^{-\omega_{pr}t}\sin(\omega_{pi}t+\phi) \right|
\]</span> another new funtion <span
class="math inline">\(g_1(t)\)</span>, by equating <span
class="math inline">\(\sin(\omega_{pi}t+\phi)\)</span> and <span
class="math inline">\(\cos(\omega_{pi}t+\phi)\)</span> to one <span
class="math display">\[
g_1(t) = \left| \alpha \right| \left|
(\omega_{pr}^2-\omega_{pi}^2)e^{-\omega_{pr}t} \right|+2\cdot |\alpha|
\left| \omega_{pr}\omega_{pi}e^{-\omega_{pr}t} \right|
\]</span></p>
<p>By triangular inequality, <span class="math inline">\(g_0(t)\)</span>
is the upper bound of <span class="math inline">\(\left| \ddot{y(t)}
\right|\)</span>, and <span class="math inline">\(g_1(t)\)</span> is the
upper bound of <span class="math inline">\(g_0(t)\)</span></p>
<p>Because <span class="math inline">\(g_1(t)\)</span> is a decaying
exponential function, Therefore, a conservative time step can be
obtained, for inteval <span class="math inline">\(t_0 \le t_0 + \Delta
t\)</span>, <span class="math display">\[
\Delta t(t=t_0) = \sqrt{\frac{8\cdot e_{tol}}{\left| g_1(t_0) \right|}}
\]</span></p>
<h3 id="one-fixed-time-step-systemverilog-model-example">One Fixed-time
step SystemVerilog model example</h3>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">timeunit</span> <span class="number">1</span>ns;</span><br><span class="line"><span class="keyword">timeprecision</span> <span class="number">1</span>fs;</span><br><span class="line"></span><br><span class="line"><span class="keyword">initial</span> #<span class="number">0</span><span class="variable">.1</span> <span class="keyword">forever</span> <span class="keyword">begin</span></span><br><span class="line">    Ir4 = (Vm - Vout) / R4;</span><br><span class="line">    Ir3 = (Vcp - Vm) / R3;</span><br><span class="line">    Ir2 = (Vcp - Vz) / R2;</span><br><span class="line"></span><br><span class="line">    Vout = Vout + Ir4 * <span class="number">0</span><span class="variable">.1</span> * (<span class="number">1</span>e-<span class="number">9</span>) / C4;</span><br><span class="line">    Vm = Vm + (Ir3 - Ir4) * <span class="number">0</span><span class="variable">.1</span> * (<span class="number">1</span>e-<span class="number">9</span>) / C3;</span><br><span class="line">    Vz = Vz + Ir2 * <span class="number">0</span><span class="variable">.1</span> * (<span class="number">1</span>e-<span class="number">9</span>) / C2;</span><br><span class="line">    Vcp = Vcp + (Icp - Ir2 - Ir3) * <span class="number">0</span><span class="variable">.1</span> * (<span class="number">1</span>e-<span class="number">9</span>) / C1;</span><br><span class="line">    last_time = <span class="built_in">$realtime</span>;</span><br><span class="line">    #<span class="number">0</span><span class="variable">.1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Acknowledgement</strong></p>
<p>My colleague, Zhang Wenpian help me a lot in understanding this
modeling method. Lots of content here are copied from Zhang's note.</p>
</blockquote>
<h2 id="reference">Reference</h2>
<p>B. C. Lim and M. Horowitz, "Error Control and Limit Cycle Elimination
in Event-Driven Piecewise Linear Analog Functional Models," in IEEE
Transactions on Circuits and Systems I: Regular Papers, vol. 63, no. 1,
pp. 23-33, Jan. 2016, doi: 10.1109/TCSI.2015.2512699.</p>
<p>S. Liao and M. Horowitz, "A Verilog piecewise-linear analog behavior
model for mixed-signal validation," Proceedings of the IEEE 2013 Custom
Integrated Circuits Conference, 2013, pp. 1-5, doi:
10.1109/CICC.2013.6658461.</p>
<p>DaVE - tools regarding on analog modeling,validation, and generation,
https://github.com/StanfordVLSI/DaVE](https://github.com/StanfordVLSI/DaVE)</p>
<p>B. C. Lim, J. -E. Jang, J. Mao, J. Kim and M. Horowitz, "Digital
Analog Design: Enabling Mixed-Signal System Validation," in <em>IEEE
Design &amp; Test</em>, vol. 32, no. 1, pp. 44-52, Feb. 2015 [<a
target="_blank" rel="noopener" href="http://iot.stanford.edu/pubs/lim-mixed-design15.pdf">http://iot.stanford.edu/pubs/lim-mixed-design15.pdf</a>]</p>
<p>Liao Sabrina, Verilog piecewise linear behavioral modeling for
mixed-signal validation [<a
target="_blank" rel="noopener" href="https://stacks.stanford.edu/file/druid:pb381vh2919/Thesis_submission-augmented.pdf">https://stacks.stanford.edu/file/druid:pb381vh2919/Thesis_submission-augmented.pdf</a>]</p>
<p>Lim, Byong Chan. Model validation of mixed-signal systems [<a
target="_blank" rel="noopener" href="https://stacks.stanford.edu/file/druid:xq068rv3398/bclim-thesis-submission-augmented.pdf">https://stacks.stanford.edu/file/druid:xq068rv3398/bclim-thesis-submission-augmented.pdf</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/18/rm-prefix-bash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/18/rm-prefix-bash/" class="post-title-link" itemprop="url">Remove prefix from multiple files in Linux console</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-18 16:01:18" itemprop="dateCreated datePublished" datetime="2024-08-18T16:01:18+00:00">2024-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:09" itemprop="dateModified" datetime="2024-09-10T04:30:09+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Bash <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for file in prefix*; do mv &quot;$file&quot; &quot;$&#123;file#prefix&#125;&quot;; done;</span><br></pre></td></tr></table></figure> The for loop iterates over all files with the
prefix. The do removes from all those files iterated over the
prefix.</p>
<p>Here is an example to remove "bla_" form the following files:
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bla_1.txt</span><br><span class="line">bla_2.txt</span><br><span class="line">bla_3.txt</span><br><span class="line">blub.txt</span><br></pre></td></tr></table></figure> Command <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for file in bla_*; do mv &quot;$file&quot; &quot;$&#123;file#bla_&#125;&quot;;done;</span><br></pre></td></tr></table></figure> Result in file system:
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.txt</span><br><span class="line">2.txt</span><br><span class="line">3.txt</span><br><span class="line">blub.txt</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>[<a
target="_blank" rel="noopener" href="https://gist.github.com/guisehn/5438bbc22138435665c6e996493fe02b">https://gist.github.com/guisehn/5438bbc22138435665c6e996493fe02b</a>]</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/18/ad-da/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/18/ad-da/" class="post-title-link" itemprop="url">Data Converter</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-18 14:50:27" itemprop="dateCreated datePublished" datetime="2024-08-18T14:50:27+00:00">2024-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:08" itemprop="dateModified" datetime="2024-09-10T04:30:08+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="kick-back">kick-back</h2>
<p>kick-back increases CDAC settling time</p>
<blockquote>
<p><em>add pre-amp (more power)</em></p>
</blockquote>
<h2 id="bootstrap-th-switch">bootstrap T/H Switch</h2>
<p><img src="/2024/08/18/ad-da/image-20240825222432796.png"
alt="image-20240825222432796" /></p>
<blockquote>
<p>A. Abo et al., â€œA 1.5-V, 10-bit, 14.3-MS/s CMOS Pipeline
Analog-toDigital Converter,â€ IEEE J. Solid-State Circuits, pp. 599, May
1999</p>
<p>Dessouky and Kaiser, "Input switch configuration suitable for
rail-to-rail operation of switched opamp circuits," Electronics Letters,
Jan. 1999.</p>
</blockquote>
<h2 id="quantization-noise">Quantization Noise</h2>
<p><img src="/2024/08/18/ad-da/image-20240825221754959.png"
alt="image-20240825221754959" /></p>
<blockquote>
<p>Quantization noise is less with higher resolution as the input range
is divided into a greater number of smaller ranges</p>
<p>This error can be considered a quantization noise with
<strong>RMS</strong></p>
</blockquote>
<h2 id="bottom-plate-sampling">Bottom plate sampling</h2>
<blockquote>
<p>Sample signal at the <em>"grounded"</em> side of the capacitor to
achieve <strong><em>signal independent sampling</em></strong></p>
</blockquote>
<p><img src="/2024/08/18/ad-da/image-20240825231816582.png"
alt="image-20240825231816582" /></p>
<p><img src="/2024/08/18/ad-da/image-20240825232007848.png"
alt="image-20240825232007848" /></p>
<p><img src="/2024/08/18/ad-da/image-20240825232717342.png"
alt="image-20240825232717342" /></p>
<p><img src="/2024/08/18/ad-da/image-20240825233801855.png"
alt="image-20240825233801855" /></p>
<p><img src="/2024/08/18/ad-da/image-20240825233821389.png"
alt="image-20240825233821389" /></p>
<hr />
<p><img src="/2024/08/18/ad-da/image-20240825233859540.png"
alt="image-20240825233859540" /></p>
<blockquote>
<p>[<a
target="_blank" rel="noopener" href="https://indico.cern.ch/event/1064521/contributions/4475393/attachments/2355793/4078773/esi_sampling_and_converters2022.pdf">https://indico.cern.ch/event/1064521/contributions/4475393/attachments/2355793/4078773/esi_sampling_and_converters2022.pdf</a>]</p>
</blockquote>
<blockquote>
<p>EE 435 Spring 2024 Analog VLSI Circuit Design - Switched-Capacitor
Amplifiers Other Integrated Filters, <a
target="_blank" rel="noopener" href="https://class.ece.iastate.edu/ee435/lectures/EE%20435%20Lect%2044%20Spring%202008.pdf">https://class.ece.iastate.edu/ee435/lectures/EE%20435%20Lect%2044%20Spring%202008.pdf</a></p>
</blockquote>
<h2 id="hold-mode-feedthrough">Hold Mode Feedthrough</h2>
<p><img src="/2024/08/18/ad-da/image-20240820204720277.png"
alt="image-20240820204720277" /></p>
<p><img src="/2024/08/18/ad-da/image-20240820204959977.png"
alt="image-20240820204959977" /></p>
<blockquote>
<p>P. Schvan et al., "A 24GS/s 6b ADC in 90nm CMOS," 2008 IEEE
International Solid-State Circuits Conference - Digest of Technical
Papers, San Francisco, CA, USA, 2008, pp. 544-634</p>
<p>B. Sedighi, A. T. Huynh and E. Skafidas, "A CMOS track-and-hold
circuit with beyond 30 GHz input bandwidth," 2012 19th IEEE
International Conference on Electronics, Circuits, and Systems (ICECS
2012), Seville, Spain, 2012, pp. 113-116</p>
<p>Tania Khanna, ESE 568: Mixed Signal Circuit Design and Modeling [<a
target="_blank" rel="noopener" href="https://www.seas.upenn.edu/~ese5680/fall2019/handouts/lec11.pdf">https://www.seas.upenn.edu/~ese5680/fall2019/handouts/lec11.pdf</a>]</p>
</blockquote>
<h2 id="cdac-intuition">CDAC intuition</h2>
<p>The <em>charge redistribution capacitor network</em> is used to
sample the input signal and serves as a digital-to-analog converter
(DAC) for creating and subtracting reference voltages</p>
<p>sampling charge <span class="math display">\[
Q = V_{in} C_{tot}
\]</span> conversion charge <span class="math display">\[
Q = -C_{tot}V_c + V_{ref}C_\Delta
\]</span> That is <span class="math display">\[
V_c = \frac{C_\Delta}{C_{tot}}V_{ref} - V_{in}
\]</span></p>
<hr />
<p>CDAC is actually working as a <strong>capacitive divider</strong>
during <em>conversion phase</em>, the charge of internal node retain
(<em>charge conservation law</em>)</p>
<p>assuming <span class="math inline">\(\Delta V_i\)</span> is applied
to series capacitor <span class="math inline">\(C_1\)</span> and <span
class="math inline">\(C_2\)</span></p>
<p><img src="/2024/08/18/ad-da/cap_divider.drawio.svg"
alt="cap_divider.drawio" /> <span class="math display">\[
(\Delta V_i - \Delta V_x) C_1 = \Delta V_x \cdot C_2
\]</span> Then <span class="math display">\[
\Delta V_x = \frac{C_1}{C_1+C_2}\Delta V_i
\]</span></p>
<blockquote>
<p><span class="math inline">\(V_x= V_{x,0} + \Delta V_x\)</span></p>
</blockquote>
<h2 id="cdac-settling-time">CDAC settling time</h2>
<p><img src="/2024/08/18/ad-da/cdac-tau.drawio.svg"
alt="cdac-tau.drawio" /> <span class="math display">\[\begin{align}
V_x(s) &amp;= \frac{C_1+C_2}{RC_1C_2}\cdot
\frac{1}{s+\frac{C_1+C_2}{RC_1C_2}}\cdot V_i(s) \\
&amp;= \frac{1}{\tau}\cdot \frac{1}{s+\frac{1}{\tau}}\cdot \frac{1}{s}\\
&amp;=  \frac{1}{\tau}\cdot \tau(\frac{1}{s} -
\frac{1}{s+\frac{1}{\tau}})=\frac{1}{s} - \frac{1}{s+\frac{1}{\tau}}
\end{align}\]</span></p>
<p>inverse Laplace Transform is <span class="math inline">\(V_x(t) = 1 -
e^{-t/\tau}\)</span></p>
<p><span class="math display">\[\begin{align}
V_y(s) &amp;= V_x\frac{C_1}{C_1+C_2} \\
&amp;= \frac{C_1}{C_1+C_2} \left(\frac{1}{s} -
\frac{1}{s+\frac{1}{\tau}}\right)\\
\end{align}\]</span></p>
<p>inverse Laplace Transform is <span class="math inline">\(V_y(t) =
\frac{C_1}{C_1+C_2}\left(1 - e^{-t/\tau}\right)\)</span></p>
<p><span class="math inline">\(V_x(t)\)</span> and <span
class="math inline">\(V_y(t)\)</span> prove that the settling time is
<em>same</em></p>
<h2 id="comparator-input-capacitance">Comparator input capacitance</h2>
<p><img src="/2024/08/18/ad-da/image-20240907194621524.png"
alt="image-20240907194621524" /> <span class="math display">\[
-V_{in}\cdot 2^N C = V_c (2^N C + C_p)
\]</span> Then <span class="math inline">\(V_c = -\frac{2^N C}{2^N C +
C_p}V_{in}\)</span>, i.e. this capacitance reduce the voltage amplitude
by the factor</p>
<p>During conversion <span class="math display">\[\begin{align}
V_c &amp;= -\frac{2^N C}{2^N C + C_p}V_{in} +V_{ref}\sum_{n=0}^{N-1}
\frac{b_n\cdot2^n C}{2^N C + C_p} \\
&amp;= \frac{2^N C}{2^N C + C_p}\left(-V_{in} +
V_{ref}\sum_{n=0}^{N-1}\frac{b_n }{2^{N-n}}  \right)
\end{align}\]</span></p>
<p>That is, it does not change the sign</p>
<h2 id="reference">reference</h2>
<p>everynanocounts. Memos on FFT With Windowing. URL: <a
target="_blank" rel="noopener" href="https://everynanocounts.com/2018/02/01/memos-on-fft-with-windowing/">https://everynanocounts.com/2018/02/01/memos-on-fft-with-windowing/</a></p>
<p>How to choose FFT depth for ADC performance analysis (SINAD, ENOB).
URL:<a
target="_blank" rel="noopener" href="https://dsp.stackexchange.com/a/38201">https://dsp.stackexchange.com/a/38201</a></p>
<p>Computation of Effective Number of Bits, Signal to Noise Ratio, &amp;
Signal to Noise &amp; Distortion Ratio Using FFT. URL:<a
target="_blank" rel="noopener" href="https://cdn.teledynelecroy.com/files/appnotes/computation_of_effective_no_bits.pdf">https://cdn.teledynelecroy.com/files/appnotes/computation_of_effective_no_bits.pdf</a></p>
<p>Kester, Walt. (2009). Understand SINAD, ENOB, SNR, THD, THD + N, and
SFDR so You Don't Get Lost in the Noise Floor. URL:<a
target="_blank" rel="noopener" href="https://www.analog.com/media/en/training-seminars/tutorials/MT-003.pdf">https://www.analog.com/media/en/training-seminars/tutorials/MT-003.pdf</a></p>
<p>T. C. Hofner: Dynamic ADC testing part I. Defining and testing
dynamic ADC parameters, Microwaves &amp; RF, 2000, vol. 39, no. 11, pp.
75-84,162</p>
<p>T. C. Hofner: Dynamic ADC testing part 2. Measuring and evaluating
dynamic line parameters, Microwaves &amp; RF, 2000, vol. 39, no. 13, pp.
78-94</p>
<p>AN9675: A Tutorial in Coherent and Windowed Sampling with A/D
Converters <a
target="_blank" rel="noopener" href="https://www.renesas.com/us/en/document/apn/an9675-tutorial-coherent-and-windowed-sampling-ad-converters">https://www.renesas.com/us/en/document/apn/an9675-tutorial-coherent-and-windowed-sampling-ad-converters</a></p>
<p>APPLICATION NOTE 3190: Coherent Sampling Calculator (CSC) <a
target="_blank" rel="noopener" href="https://www.stg-maximintegrated.com/en/design/technical-documents/app-notes/3/3190.html">https://www.stg-maximintegrated.com/en/design/technical-documents/app-notes/3/3190.html</a></p>
<p>Coherent Sampling (Very Brief and Simple) <a
target="_blank" rel="noopener" href="https://www.dsprelated.com/thread/469/coherent-sampling-very-brief-and-simple">https://www.dsprelated.com/thread/469/coherent-sampling-very-brief-and-simple</a></p>
<p>Signal Chain Basics #160: Making sense of coherent and noncoherent
sampling in data-converter testing <a
target="_blank" rel="noopener" href="https://www.planetanalog.com/signal-chain-basics-160-making-sense-of-coherent-and-noncoherent-sampling-in-data-converter-testing/">https://www.planetanalog.com/signal-chain-basics-160-making-sense-of-coherent-and-noncoherent-sampling-in-data-converter-testing/</a></p>
<p>Signal Chain Basics #104: Understanding noise in ADCs <a
target="_blank" rel="noopener" href="https://www.planetanalog.com/signal-chain-basics-part-104-understanding-noise-in-adcs/">https://www.planetanalog.com/signal-chain-basics-part-104-understanding-noise-in-adcs/</a></p>
<p>Signal Chain Basics #101: ENOB Degradation Analysis Over Frequency
Due to Jitter <a
target="_blank" rel="noopener" href="https://www.planetanalog.com/signal-chain-basics-part-101-enob-degradation-analysis-over-frequency-due-to-jitter/">https://www.planetanalog.com/signal-chain-basics-part-101-enob-degradation-analysis-over-frequency-due-to-jitter/</a></p>
<p>Clock jitter analyzed in the time domain, Part 1, Texas Instruments
Analog Applications Journal (slyt379), Aug 2010 <a
target="_blank" rel="noopener" href="https://www.ti.com/lit/an/slyt379/slyt379.pdf">https://www.ti.com/lit/an/slyt379/slyt379.pdf</a></p>
<p>Clock jitter analyzed in the time domain, Part 2 <a
target="_blank" rel="noopener" href="https://www.ti.com/lit/slyt389">https://www.ti.com/lit/slyt389</a></p>
<p>Measurement of Total Harmonic Distortion and Its Related Parameters
using Multi-Instrument [<a
target="_blank" rel="noopener" href="https://www.virtins.com/doc/Measurement-of-Total-Harmonic-Distortion-and-Its-Related-Parameters-using-Multi-Instrument.pdf">pdf</a>]</p>
<p>Application Note AN-4: Understanding Data Converters' Frequency
Domain Specifications [<a
target="_blank" rel="noopener" href="https://www.datel.com/data/ads/adc-an4.pdf">pdf</a>]</p>
<p>Belleman, J. (2008). From analog to digital.
10.5170/CERN-2008-003.131. [<a
target="_blank" rel="noopener" href="https://cds.cern.ch/record/1100535/files/p131.pdf">pdf</a>]</p>
<p>HandWiki. Coherent sampling [<a
target="_blank" rel="noopener" href="https://handwiki.org/wiki/Coherent_sampling">link</a>]</p>
<p>Luis Chioye, TI. Leverage coherent sampling and FFT windows when
evaluating SAR ADCs (Part 1) [<a
target="_blank" rel="noopener" href="https://e2e.ti.com/blogs_/archives/b/precisionhub/posts/leverage-coherent-sampling-and-fft-windows-when-evaluating-sar-adcs-part-1">link</a>]</p>
<p>Coherent Sampling vs. Window Sampling | Analog Devices <a
target="_blank" rel="noopener" href="https://www.analog.com/en/technical-articles/coherent-sampling-vs-window-sampling.html">https://www.analog.com/en/technical-articles/coherent-sampling-vs-window-sampling.html</a></p>
<p>Understanding Effective Number of Bits <a
target="_blank" rel="noopener" href="https://robustcircuitdesign.com/signal-chain-explorer/understanding-effective-number-of-bits/">https://robustcircuitdesign.com/signal-chain-explorer/understanding-effective-number-of-bits/</a></p>
<p>ADC Input Noise: The Good, The Bad, and The Ugly. Is No Noise Good
Noise? [<a
target="_blank" rel="noopener" href="https://www.analog.com/en/resources/analog-dialogue/articles/adc-input-noise.html">https://www.analog.com/en/resources/analog-dialogue/articles/adc-input-noise.html</a>]</p>
<p>Walt Kester, Taking the Mystery out of the Infamous Formula, "SNR =
6.02N + 1.76dB," and Why You Should Care [<a
target="_blank" rel="noopener" href="https://www.analog.com/media/en/training-seminars/tutorials/MT-001.pdf">https://www.analog.com/media/en/training-seminars/tutorials/MT-001.pdf</a>]</p>
<p>Dan Boschen, "How to choose FFT depth for ADC performance analysis
(SINAD, ENOB)", [<a
target="_blank" rel="noopener" href="https://dsp.stackexchange.com/a/38201">https://dsp.stackexchange.com/a/38201</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/11/adapt/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/11/adapt/" class="post-title-link" itemprop="url">adaptation in wireline</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-11 11:07:31" itemprop="dateCreated datePublished" datetime="2024-08-11T11:07:31+00:00">2024-08-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:08" itemprop="dateModified" datetime="2024-09-10T04:30:08+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="least-mean-square-lms">Least-Mean-Square (LMS)</h2>
<blockquote>
<p>minimum mean square error (MMSE)</p>
</blockquote>
<p>This simplified version of LMS algorithm is identical to the
<em>zero-forcing</em> algorithm which minimizes the ISI at data
samples</p>
<h3 id="sign-sign-lms-ss-lms">Sign-Sign LMS (SS-LMS)</h3>
<blockquote>
<p>T11: Basics of Equalization Techniques: Channels, Equalization, and
Circuits, 2022 IEEE International Solid-State Circuits Conference</p>
<p>V. Stojanovic et al., "Autonomous dual-mode (PAM2/4) serial link
transceiver with adaptive equalization and data recovery," in IEEE
Journal of Solid-State Circuits, vol. 40, no. 4, pp. 1012-1026, April
2005, doi: 10.1109/JSSC.2004.842863.</p>
<p>Jinhyung Lee, Design of High-Speed Receiver for Video Interface with
Adaptive Equalization; Phd thesis, August 2019. <a
target="_blank" rel="noopener" href="http://dcollection.snu.ac.kr/common/orgView/000000157003">thesis
link</a></p>
<p>Paulo S. R. Diniz, Adaptive Filtering: Algorithms and Practical
Implementation, 5th edition</p>
<p>E. -H. Chen et al., "Near-Optimal Equalizer and Timing Adaptation for
I/O Links Using a BER-Based Metric," in IEEE Journal of Solid-State
Circuits, vol. 43, no. 9, pp. 2144-2156, Sept. 2008</p>
</blockquote>
<h3 id="dfe-h0-estimator">DFE h0 Estimator</h3>
<p>summer output <span class="math display">\[
r_k =
a_kh_0+\left(\sum_{n=-\infty,n\neq0}^{+\infty}a_{k-n}h_n-\sum_{n=1}^{\text{ntap}}\hat{a}_{k-n}\hat{h}_n\right)
\]</span> error slicer analog output <span class="math display">\[
e_k=r_k-\hat{a}_k \hat{h}_0
\]</span> error slicer digital output <span class="math display">\[
\hat{e}_k=|e_k|
\]</span> It's NOT possible to implement <span
class="math inline">\(e_k\)</span>, which need to determine <span
class="math inline">\(\hat{a}_k=|r_k|\)</span> in no time. One method to
approach this problem is calculate <span
class="math inline">\(e_k^{a_k=1}=r_k-\hat{a}_k \hat{h}_0\)</span> and
<span class="math inline">\(e_k^{a_k=-1}=r_k+\hat{a}_k
\hat{h}_0\)</span>, then select the right one based on <span
class="math inline">\(\hat{a}_k\)</span></p>
<p>The update equation based on Sign-Sign-Least Mean square (SS-LMS) and
loss function <span
class="math inline">\(L(\hat{h}_{\text{0~ntap}})=E(e_k^2)\)</span> <span
class="math display">\[
\hat{h}_n(k+1) = \hat{h}_n(k)+\mu \cdot |e_k|\cdot \hat{a}_{k-n}
\]</span> Where <span class="math inline">\(n \in
[0,...,\text{ntap}]\)</span>. This way, we can obtain <span
class="math inline">\(\hat{h}_0\)</span>, <span
class="math inline">\(\hat{h}_1\)</span>, <span
class="math inline">\(\hat{h}_2\)</span>, ...</p>
<blockquote>
<p><span class="math inline">\(\hat{h}_0\)</span> is used in AFE
adaptation</p>
</blockquote>
<p>We may encounter difficulty if the first tap of DFE is unrolled, its
<span class="math inline">\(e_k\)</span> is modified as follow <span
class="math display">\[
r_k =
a_kh_0+\left(\sum_{n=-\infty,n\neq0}^{+\infty}a_{k-n}h_n-\sum_{n=2}^{\text{ntap}}\hat{a}_{k-n}\hat{h}_n\right)
\]</span> Where there is NO <span
class="math inline">\(\hat{h}_1\)</span></p>
<p>To find <span class="math inline">\(\hat{h}_1\)</span>, we shall use
different pattern for even and odd error slicer</p>
<h2 id="maximum-likelihood-sequence-estimation-mlse">Maximum Likelihood
Sequence Estimation (MLSE)</h2>
<p><img src="/2024/08/11/adapt/image-20240807233152154.png"
alt="image-20240807233152154" /></p>
<p><img src="/2024/08/11/adapt/image-20240812205534753.png"
alt="image-20240812205534753" /></p>
<p><img src="/2024/08/11/adapt/image-20240812205613467.png"
alt="image-20240812205613467" /></p>
<blockquote>
<p>[IBIS-AMI Modeling and Correlation Methodology for ADC-Based SerDes
Beyond 100 Gb/s <a
target="_blank" rel="noopener" href="https://static1.squarespace.com/static/5fb343ad64be791dab79a44f/t/63d807441bcd266de258b975/1675102025481/SLIDES_Track02_IBIS_AMI_Modeling_and_Correlation_Tyshchenko.pdf">https://static1.squarespace.com/static/5fb343ad64be791dab79a44f/t/63d807441bcd266de258b975/1675102025481/SLIDES_Track02_IBIS_AMI_Modeling_and_Correlation_Tyshchenko.pdf</a>]</p>
<p>M. Emami Meybodi, H. Gomez, Y. -C. Lu, H. Shakiba and A.
Sheikholeslami, "Design and Implementation of an On-Demand
Maximum-Likelihood Sequence Estimation (MLSE)," in IEEE Open Journal of
Circuits and Systems, vol. 3, pp. 97-108, 2022, doi:
10.1109/OJCAS.2022.3173686.</p>
<p>Zaman, Arshad Kamruz (2019). A Maximum Likelihood Sequence Equalizing
Architecture Using Viterbi Algorithm for ADC-Based Serial Link.
Undergraduate Research Scholars Program. Available electronically from
[<a
target="_blank" rel="noopener" href="https://hdl.handle.net/1969.1/166485">https://hdl.handle.net/1969.1/166485</a>]</p>
</blockquote>
<p>There are several variants of MLSD (Maximum Likelihood Sequence
Detection), including:</p>
<ul>
<li>Viterbi Algorithm</li>
<li>Decision Feedback Sequence Estimation (DFSE)</li>
<li>Soft-Output MLSD</li>
</ul>
<blockquote>
<p>[Evolution Of Equalization Techniques In High-Speed SerDes For
Extended Reaches. <a
target="_blank" rel="noopener" href="https://semiengineering.com/evolution-of-equalization-techniques-in-high-speed-serdes-for-extended-reaches/">https://semiengineering.com/evolution-of-equalization-techniques-in-high-speed-serdes-for-extended-reaches/</a>]</p>
</blockquote>
<p><img src="/2024/08/11/adapt/image-20240824193839108.png"
alt="image-20240824193839108" /></p>
<h2 id="mueller-muller-cdr">Mueller-Muller CDR</h2>
<p><img src="/2024/08/11/adapt/image-20240812222307061.png"
alt="image-20240812222307061" /></p>
<p>MMPD infers the channel response from baud-rate samples of the
received data, the adaptation aligns the sampling clock such that
pre-cursor is equal to the post-cursor in the <em>pulse
response</em></p>
<p><img src="/2024/08/11/adapt/image-20240807230029591.png"
alt="image-20240807230029591" /></p>
<blockquote>
<p>Faisal A. Musa. "HIGH-SPEED BAUD-RATE CLOCK RECOVERY" [<a
target="_blank" rel="noopener" href="https://www.eecg.utoronto.ca/~tcc/thesis-musa-final.pdf">https://www.eecg.utoronto.ca/~tcc/thesis-musa-final.pdf</a>]</p>
<p>Faisal A. Musa."CLOCK RECOVERY IN HIGH-SPEED MULTILEVEL SERIAL LINKS"
[<a
target="_blank" rel="noopener" href="https://www.eecg.utoronto.ca/~tcc/faisal_iscas03.pdf">https://www.eecg.utoronto.ca/~tcc/faisal_iscas03.pdf</a>]</p>
<p>Eduardo Fuentetaja. "Analysis of the M&amp;M Clock Recovery
Algorithm" [<a
target="_blank" rel="noopener" href="https://edfuentetaja.github.io/sdr/m_m_analysis/">https://edfuentetaja.github.io/sdr/m_m_analysis/</a>]</p>
<p>Liu, Tao &amp; Li, Tiejun &amp; Lv, Fangxu &amp; Liang, Bin &amp;
Zheng, Xuqiang &amp; Wang, Heming &amp; Wu, Miaomiao &amp; Lu, Dechao
&amp; Zhao, Feng. (2021). Analysis and Modeling of Mueller-Muller Clock
and Data Recovery Circuits. Electronics. 10. 1888.
10.3390/electronics10161888.</p>
<p>Gu, Youzhi &amp; Feng, Xinjie &amp; Chi, Runze &amp; Chen, Yongzhen
&amp; Wu, Jiangfeng. (2022). Analysis of Mueller-Muller Clock and Data
Recovery Circuits with a Linearized Model.
10.21203/rs.3.rs-1817774/v1.</p>
<p>Baud-Rate CDRs [<a
target="_blank" rel="noopener" href="https://ocw.snu.ac.kr/sites/default/files/NOTE/Lec%206%20-%20Clock%20and%20Data%20Recovery.pdf">https://ocw.snu.ac.kr/sites/default/files/NOTE/Lec%206%20-%20Clock%20and%20Data%20Recovery.pdf</a>]</p>
<p>F. Spagna <em>et al</em>., "A 78mW 11.8Gb/s serial link transceiver
with adaptive RX equalization and baud-rate CDR in 32nm CMOS," <em>2010
IEEE International Solid-State Circuits Conference - (ISSCC)</em>, San
Francisco, CA, USA, 2010, pp. 366-367, doi:
10.1109/ISSCC.2010.5433823.</p>
<p>K. Yadav, P. -H. Hsieh and A. C. Carusone, "Loop Dynamics Analysis of
PAM-4 Muellerâ€“Muller Clock and Data Recovery System," in <em>IEEE Open
Journal of Circuits and Systems</em>, vol. 3, pp. 216-227, 2022</p>
</blockquote>
<p><img src="/2024/08/11/adapt/image-20240810095006113.png"
alt="image-20240810095006113" /></p>
<p><img src="/2024/08/11/adapt/image-20240808001201612.png"
alt="image-20240808001201612" /></p>
<p><img src="/2024/08/11/adapt/image-20240808001256515.png"
alt="image-20240808001256515" /></p>
<p><img src="/2024/08/11/adapt/image-20240808001449664.png"
alt="image-20240808001449664" /></p>
<p><img src="/2024/08/11/adapt/image-20240808001501485.png"
alt="image-20240808001501485" /></p>
<h2 id="ss-mm-cdr">SS-MM CDR</h2>
<p><img src="/2024/08/11/adapt/image-20240807232814202.png"
alt="image-20240807232814202" /></p>
<p><span class="math inline">\(h_1\)</span> is
<strong>necessary</strong></p>
<ul>
<li><p>without DFE</p>
<p>SS-MMPD locks at the point (<span
class="math inline">\(h_1=h_{-1}\)</span>â€‹)</p></li>
<li><p>With a 1-tap DFE</p>
<p>1-tap adaptive DFE that forces the <span
class="math inline">\(h_1\)</span> to be <em>zero</em>, the SS-MMPD
locks wherever the <span class="math inline">\(h_{-1}\)</span>â€‹ is zero
and drifts eventually.</p>
<p>Consequently, it suffers from a severe <em>multiple-locking problem
with an adaptive DFE</em></p></li>
</ul>
<p><img src="/2024/08/11/adapt/image-20240812232618238.png"
alt="image-20240812232618238" /></p>
<blockquote>
<p>Kwangho Lee, "Design of Receiver with Offset Cancellation of Adaptive
Equalizer and Multi-Level Baud-Rate Phase Detector" [<a
target="_blank" rel="noopener" href="https://s-space.snu.ac.kr/bitstream/10371/177584/1/000000167211.pdf">https://s-space.snu.ac.kr/bitstream/10371/177584/1/000000167211.pdf</a>]</p>
</blockquote>
<h3 id="pattern-filter">Pattern filter</h3>
<table>
<thead>
<tr class="header">
<th>pattern</th>
<th>main cursor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0<strong>1</strong>1</td>
<td><span class="math inline">\(s_{011}=-h_1+h_0+h_{-1}\)</span></td>
</tr>
<tr class="even">
<td>1<strong>1</strong>0</td>
<td><span class="math inline">\(s_{110}=h_1+h_0-h_{-1}\)</span></td>
</tr>
<tr class="odd">
<td>1<strong>0</strong>0</td>
<td><span class="math inline">\(s_{100}=h_1-h_0-h_{-1}\)</span></td>
</tr>
<tr class="even">
<td>0<strong>0</strong>1</td>
<td><span class="math inline">\(s_{001}=-h_1-h_0+h_{-1}\)</span></td>
</tr>
</tbody>
</table>
<p>During adapting, we make</p>
<ul>
<li><span class="math inline">\(s_{011}\)</span> &amp; <span
class="math inline">\(s_{110}\)</span> are approaching to each
other</li>
<li><span class="math inline">\(s_{100}\)</span> &amp; <span
class="math inline">\(s_{001}\)</span> are approaching to each
other</li>
</ul>
<p>Then, <span class="math inline">\(h_{-1}\)</span> and <span
class="math inline">\(h_1\)</span> are same, which is desired</p>
<h2 id="bang-bang-cdr">Bang-Bang CDR</h2>
<blockquote>
<p>alexander PD or !!PD</p>
</blockquote>
<p>The alexander PD locks that edge clock (clkedge) is located at zero
crossings of the data. The <span class="math inline">\(h_{-0.5}\)</span>
and <span class="math inline">\(h_{0.5}\)</span> are
<strong>equal</strong> at the <em>lock point,</em> where the <span
class="math inline">\(h_{-0.5}\)</span> and <span
class="math inline">\(h_{0.5}\)</span> are the cursors located at -0.5
UI and 0.5 UI.</p>
<blockquote>
<p>Kwangho Lee, "Design of Receiver with Offset Cancellation of Adaptive
Equalizer and Multi-Level Baud-Rate Phase Detector" [<a
target="_blank" rel="noopener" href="https://s-space.snu.ac.kr/bitstream/10371/177584/1/000000167211.pdf">https://s-space.snu.ac.kr/bitstream/10371/177584/1/000000167211.pdf</a>]</p>
<p>Shahramian, Shayan, "Adaptive Decision Feedback Equalization With
Continuous-time Infinite Impulse Response Filters" [<a
target="_blank" rel="noopener" href="https://tspace.library.utoronto.ca/bitstream/1807/77861/3/Shahramian_Shayan_201606_PhD_thesis.pdf">https://tspace.library.utoronto.ca/bitstream/1807/77861/3/Shahramian_Shayan_201606_PhD_thesis.pdf</a>]</p>
<p>MENIN, DAVIDE, "Modelling and Design of High-Speed Wireline
Transceivers with Fully-Adaptive Equalization" [<a
target="_blank" rel="noopener" href="https://air.uniud.it/retrieve/e27ce0ca-15f7-055e-e053-6605fe0a7873/Modelling%20and%20Design%20of%20High-Speed%20Wireline%20Transceivers%20with%20Fully-Adaptive%20Equalization.pdf">https://air.uniud.it/retrieve/e27ce0ca-15f7-055e-e053-6605fe0a7873/Modelling%20and%20Design%20of%20High-Speed%20Wireline%20Transceivers%20with%20Fully-Adaptive%20Equalization.pdf</a>]</p>
</blockquote>
<h2 id="reference">reference</h2>
<p>Stojanovic, Vladimir &amp; Ho, A. &amp; Garlepp, B. &amp; Chen, Fred
&amp; Wei, J. &amp; Alon, Elad &amp; Werner, C. &amp; Zerbe, J. &amp;
Horowitz, M.A.. (2004). Adaptive equalization and data recovery in a
dual-mode (PAM2/4) serial link transceiver. IEEE Symposium on VLSI
Circuits, Digest of Technical Papers. 348 - 351.
10.1109/VLSIC.2004.1346611.</p>
<p>A. A. Bazargani, H. Shakiba and D. A. Johns, "MMSE Equalizer Design
Optimization for Wireline SerDes Applications," in <em>IEEE Transactions
on Circuits and Systems I: Regular Papers</em>, doi:
10.1109/TCSI.2023.3328807.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/07/27/biasing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/07/27/biasing/" class="post-title-link" itemprop="url">Bias Circuit</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-07-27 17:20:52" itemprop="dateCreated datePublished" datetime="2024-07-27T17:20:52+00:00">2024-07-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-10 04:30:08" itemprop="dateModified" datetime="2024-09-10T04:30:08+00:00">2024-09-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="curvature-compensation">Curvature compensation</h2>
<p><img src="/2024/07/27/biasing/image-20240903234720200.png"
alt="image-20240903234720200" /></p>
<blockquote>
<p>Tutorials | 08012023 | 1.2.1 Bandgap Voltage Regular |, [<a
target="_blank" rel="noopener" href="https://youtu.be/dz067SOX0XQ?si=PlYczw9UdneAX6Na">https://youtu.be/dz067SOX0XQ?si=PlYczw9UdneAX6Na</a>]</p>
</blockquote>
<h2 id="subthreshold-conduction">Subthreshold Conduction</h2>
<p>By square-law, the Eq <span class="math inline">\(g_m = \sqrt{2\mu
C_{ox}\frac{W}{L}I_D}\)</span>, it is possible to obtain a
<em>higer</em> transconductance by increasing <span
class="math inline">\(W\)</span> while maintaining <span
class="math inline">\(I_D\)</span> constant. However, if <span
class="math inline">\(W\)</span> increases while <span
class="math inline">\(I_D\)</span> remains constant, then <span
class="math inline">\(V_{GS} \to V_{TH}\)</span> and device enters the
subthreshold region. <span class="math display">\[
I_D = I_0\exp \frac{V_{GS}}{\xi V_T}
\]</span></p>
<p>where <span class="math inline">\(I_0\)</span> is proportional to
<span class="math inline">\(W/L\)</span>, <span
class="math inline">\(\xi \gt 1\)</span> is a nonideality factor, and
<span class="math inline">\(V_T = kT/q\)</span></p>
<p>As a result, the transconductance in subthreshold region is <span
class="math display">\[
g_m = \frac{I_D}{\xi V_T}
\]</span></p>
<p>which is <span class="math inline">\(g_m \propto I_D\)</span></p>
<p><img src="/2024/07/27/biasing/image-20240627230726326.png"
alt="image-20240627230726326" /></p>
<p><img src="/2024/07/27/biasing/image-20240627230744044.png"
alt="image-20240627230744044" /></p>
<h3 id="ptat-with-subthreshold-mos">PTAT with subthreshold MOS</h3>
<p>MOS working in the <strong>weak inversion region</strong>
(<strong>"subthreshold conduction"</strong>) have the similar
characteristics to BJTs and diodes, since the effect of diffusion
current becomes more significant than that of drift current</p>
<p><img src="/2024/07/27/biasing/image-20240803193343915.png"
alt="image-20240803193343915" /></p>
<p><img src="/2024/07/27/biasing/image-20240803195500321.png"
alt="image-20240803195500321" /></p>
<p><img src="/2024/07/27/biasing/image-20240803200129592.png"
alt="image-20240803200129592" /></p>
<blockquote>
<p>Hongprasit, Saweth, Worawat Sa-ngiamvibool and Apinan Aurasopon.
â€œDesign of Bandgap Core and Startup Circuits for All CMOS Bandgap
Voltage Reference.â€ <em>PrzeglÄ…d Elektrotechniczny</em> (2012):
277-280.</p>
</blockquote>
<h2 id="vbe">VBE</h2>
<ul>
<li><p>temperature coefficient of <span
class="math inline">\(V_{BE}\)</span> itself depends on the
temperature,</p></li>
<li><p>temperature coefficient of the <span
class="math inline">\(V_{BE}\)</span> at a given temperature T depends
on the magnitude of <span class="math inline">\(V_{BE}\)</span>
itself</p></li>
</ul>
<blockquote>
<p><span class="math inline">\(\frac{kT}{q}\)</span>â€‹ is approximately
26mV, at room temperature 300K</p>
<p>In advanced node, N4P, <span class="math inline">\(V_{BE}\)</span> is
about -1.45mV/K</p>
</blockquote>
<h2 id="constant-gm">constant-gm</h2>
<blockquote>
<p>aka. <strong>Beta-multiplier reference</strong></p>
</blockquote>
<p><img src="/2024/07/27/biasing/image-20240803155734754.png"
alt="image-20240803155734754" /></p>
<blockquote>
<p><span class="math inline">\(I_\text{out}\)</span> is
<strong>PTAT</strong> in case temperature coefficient of <span
class="math inline">\(R_s\)</span> is less than that of <span
class="math inline">\(\mu_n\)</span></p>
</blockquote>
<hr />
<p><img src="/2024/07/27/biasing/image-20240803201548623.png"
alt="image-20240803201548623" /></p>
<blockquote>
<p>Body effect of M2</p>
</blockquote>
<p><img src="/2024/07/27/biasing/image-20240803201803449.png"
alt="image-20240803201803449" /></p>
<p><img src="/2024/07/27/biasing/image-20240803202015668.png"
alt="image-20240803202015668" /></p>
<p><img src="/2024/07/27/biasing/image-20240803201941683.png"
alt="image-20240803201941683" /></p>
<hr />
<p><img src="/2024/07/27/biasing/image-20231213235846243.png"
alt="image-20231213235846243" /></p>
<blockquote>
<p>Boris Murmann, Systematic Design of Analog Circuits Using
Pre-Computed Lookup Tables</p>
</blockquote>
<blockquote>
<p>S. Pavan, "Systematic Development of CMOS Fixed-Transconductance Bias
Circuits," in <em>IEEE Transactions on Circuits and Systems II: Express
Briefs</em>, vol. 69, no. 5, pp. 2394-2397, May 2022</p>
<p>S. Pavan, "A Fixed Transconductance Bias Circuit for CMOS Analog
Integrated Circuits", <em>IEEE International Symposium on Circuits and
Systems</em>, ISCAS 2004, Vancouver , May 2004</p>
</blockquote>
<h2 id="why-employ-mosfets-in-saturation">Why employ MOSFETs in
saturation?</h2>
<h3 id="gm-gds-at-fixed-vgs">gm, gds at fixed VGS</h3>
<p><img src="/2024/07/27/biasing/image-20231125224714658.png"
alt="image-20231125224714658" /></p>
<hr />
<p><span class="math inline">\(g_{ds}\)</span> is constant in saturation
region</p>
<p>in triode region <span class="math display">\[
g_{ds} = \mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH}-V_{DS})
\]</span></p>
<blockquote>
<p>Interestingly, <span class="math inline">\(g_m\)</span> in the
saturation region is equal to the inverse of <span
class="math inline">\(R_\text{on}\)</span> in the deep triode
region.</p>
</blockquote>
<p><img src="/2024/07/27/biasing/gds_vgs.drawio.svg"
alt="gds_vgs.drawio" /></p>
<p><img src="/2024/07/27/biasing/image-20240727140918647.png"
alt="image-20240727140918647" /></p>
<h3 id="gm-gds-at-fixed-id-vg">gm, gds at fixed Id, VG</h3>
<p><strong>In triode region</strong> <span class="math display">\[
I_D  =
\frac{1}{2}\mu_nC_{ox}\frac{W}{L}[2(V_{GS}-V_{TH})V_{DS}-V_{DS}^2]
\]</span> where <span class="math inline">\(I_D\)</span> and <span
class="math inline">\(V_G\)</span> is fixed</p>
<p>Then <span class="math inline">\(V_S\)</span> can be expressed with
<span class="math inline">\(V_D\)</span>, that is <span
class="math display">\[
V_S = V_{GT} - \sqrt{(V_{GT}-V_D)^2+V_{dsat}^2}
\]</span> where <span class="math inline">\(V_{GT}=V_G-V_{TH}\)</span>,
<span class="math inline">\(V_{dsat}\)</span> is <span
class="math inline">\(V_{DS}\)</span> saturation voltage <span
class="math display">\[
g_m =
\mu_nC_{ox}\frac{W}{L}\left(V_D-V_{GT}+\sqrt{(V_{GT}-V_D)^2+V_{dsat}^2}\right)
\]</span> Then <span class="math display">\[
\frac{\partial g_m}{\partial V_D} \propto  1 -
\frac{V_{GT}-V_D}{\sqrt{(V_{GT}-V_D)^2+V_{dsat}^2}} \gt 0
\]</span></p>
<p>That is, <span class="math inline">\(g_m \propto V_D\)</span>â€‹</p>
<hr />
<p><span class="math display">\[\begin{align}
g_{ds} &amp;= \mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH}-V_{DS}) \\
&amp;= \mu_nC_{ox}\frac{W}{L}(V_{GT}-V_{D})
\end{align}\]</span></p>
<p>That is, <span class="math inline">\(g_{ds} \propto -V_D\)</span></p>
<p><img src="/2024/07/27/biasing/image-20240727171005401.png"
alt="image-20240727171005401" /></p>
<blockquote>
<p>Both gain and speed degrade once entering triode region, though Id is
constant</p>
</blockquote>
<h2 id="cascode-mos">Cascode MOS</h2>
<p>The low threshold voltage of cascode MOS <strong>don't</strong> help
decrease the minimum output voltage</p>
<p><img src="/2024/07/27/biasing/cascode_vth.drawio.svg"
alt="cascode_vth.drawio" /></p>
<h2 id="channel-length-modulation">Channel-length modulation</h2>
<blockquote>
<p>â—Â There it <strong>not</strong> channel-length modulation in the
triode region</p>
<p><img src="/2024/07/27/biasing/image-20240727095651984.png"
alt="image-20240727095651984" /></p>
</blockquote>
<p><span class="math display">\[\begin{align}
I_D
&amp;=\frac{1}{2}\mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH})^2(1+\frac{\Delta
L}{L}) \\
I_D &amp;=\frac{1}{2}\mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH})^2(1+\lambda
V_{DS}) \\
I_D
&amp;=\frac{1}{2}\mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH})^2(1+\frac{V_{DS}}{V_A})
\end{align}\]</span></p>
<p>where <span class="math inline">\(\frac{\Delta L}{L}=\lambda
V_{DS}\)</span> and <span
class="math inline">\(V_A=\frac{1}{\lambda}\)</span></p>
<p><span class="math inline">\(\lambda\)</span> is channel length
modulation parameter</p>
<p><span class="math inline">\(V_A\)</span>, i.e. Early voltage is equal
to inverse of channel length modulation parameter</p>
<p>The output resistance <span class="math inline">\(r_o\)</span></p>
<p><span class="math display">\[\begin{align}
r_o &amp;= \frac{\partial V_{DS}}{\partial I_D} \\
&amp;= \frac{1}{\partial I_D/\partial V_{DS}} \\
&amp;= \frac{1}{\lambda I_D} \\
&amp;= \frac{V_A}{I_D}
\end{align}\]</span></p>
<p>Due to <span class="math inline">\(\lambda \propto 1/L\)</span>, i.e.
<span class="math inline">\(V_A \propto L\)</span> <span
class="math display">\[
r_o \propto \frac{L}{I_D}
\]</span> <img src="/2024/07/27/biasing/image-20220930001909262.png"
alt="image-20220930001909262" /></p>
<p><img src="/2024/07/27/biasing/image-20220930002003924.png"
alt="image-20220930002003924" /></p>
<p><img src="/2024/07/27/biasing/image-20220930002157365.png"
alt="image-20220930002157365" /></p>
<p>The output resistance is almost doubled using Stacked FET in
<em>saturation region</em></p>
<blockquote>
<p><span class="math inline">\(V_t\)</span> and mobility <span
class="math inline">\(\mu_{n,p}\)</span> are sensitive to
temperature</p>
<ul>
<li><span class="math inline">\(V_t\)</span> decreases by 2-mV for every
1<span class="math inline">\(^oC\)</span> rise in temperature</li>
<li>mobility <span class="math inline">\(\mu_{n,p}\)</span> decreases
with temperature</li>
</ul>
<p>Overall, increase in temperature results in lower drain currents</p>
</blockquote>
<h2 id="current-mirror-mismatch">current mirror mismatch</h2>
<p>The current mismatch consists of two components.</p>
<ul>
<li>The first depends on threshold voltage mismatch and increases as the
overdrive <span class="math inline">\((V_{GS} âˆ’ V_t)\)</span> is
reduced.</li>
<li>The second is geometry dependent and contributes a fractional
current mismatch that is independent of bias point.</li>
</ul>
<p><span class="math display">\[
\Delta I_D = g_m\cdot \Delta V_{TH}+I_D\cdot \frac{\Delta(W/L)}{W/L}
\]</span></p>
<p>where mismatches in <span class="math inline">\(\mu_nC_{ox}\)</span>
are neglected</p>
<p><span class="math display">\[\begin{align}
\Delta V_{TH} &amp;= \frac{A_{VTH}}{\sqrt{WL}} \\
\frac{\Delta(W/L)}{W/L} &amp;= \frac{A_{WL}}{\sqrt{WL}}
\end{align}\]</span></p>
<p><strong>summary:</strong></p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 14%" />
<col style="width: 28%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr class="header">
<th>Size</th>
<th><span class="math inline">\(g_m\)</span></th>
<th><span class="math inline">\(\Delta V_{TH}\)</span></th>
<th><span class="math inline">\(\frac{\Delta(W/L)}{W/L}\)</span></th>
<th>mismatch (%)</th>
<th>simu (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>W, L</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td><span
class="math inline">\(I_{\Delta_{V_{TH}}}+I_{\Delta_{WL}}\)</span></td>
<td>3.44</td>
</tr>
<tr class="even">
<td>W, 2L</td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span
class="math inline">\(I_{\Delta_{V_{TH}}}/2+I_{\Delta_{WL}}/\sqrt{2}\)</span></td>
<td>1.98</td>
</tr>
<tr class="odd">
<td>2W, L</td>
<td><span class="math inline">\(\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span
class="math inline">\(I_{\Delta_{V_{TH}}}+I_{\Delta_{WL}}/\sqrt{2}\)</span></td>
<td>2.93</td>
</tr>
<tr class="even">
<td>We get <span class="math inline">\(I_{\Delta_{V_{TH}}}\simeq
1.71\%\)</span> and <span class="math inline">\(I_{\Delta_{WL}} \simeq
1.73\%\)</span></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="/2024/07/27/biasing/image-20221003001056211.png"
alt="image-20221003001056211" /></p>
<p><img src="/2024/07/27/biasing/image-20221002215942456.png"
alt="image-20221002215942456" /></p>
<h2 id="biasing-current-source-and-global-variation-monte-carlo">Biasing
current source and global variation Monte Carlo</h2>
<p><img src="/2024/07/27/biasing/image-20221020225334767.png"
alt="image-20221020225334767" /></p>
<p><img src="/2024/07/27/biasing/image-20221020225502503.png"
alt="image-20221020225502503" /></p>
<p><strong>iwl</strong>: biased by mirror</p>
<p><strong>iwl_ideal</strong>: biased by <em>vdc</em> source, whose
value is <em>typical corner</em></p>
<hr />
<p>For <strong>local variation</strong>, constant voltage bias
(<em>vb_const</em> in schematic) help reduce variation from <span
class="math inline">\(\sqrt{2}\Delta V_{th}\)</span> to <span
class="math inline">\(\Delta V_{th}\)</span></p>
<p>For <strong>global variation</strong>, <em>all device have same
variation</em>, mirror help reduce variation by sharing same <span
class="math inline">\(V_{gs}\)</span></p>
<ol type="1">
<li>global variation + local variation (All MC)</li>
</ol>
<p><img src="/2024/07/27/biasing/image-20221020225615633.png"
alt="image-20221020225615633" /></p>
<ol start="2" type="1">
<li>local variation (Mismatch MC)</li>
</ol>
<p><img src="/2024/07/27/biasing/image-20221020225701218.png"
alt="image-20221020225701218" /></p>
<ol start="3" type="1">
<li>global variation (Process MC)</li>
</ol>
<p><img src="/2024/07/27/biasing/image-20221020232515420.png"
alt="image-20221020232515420" /></p>
<blockquote>
<p>We had better bias mos gate with mirror rather than the <em>vdc</em>
source while simulating sub-block.</p>
<p>This is real situation due to current source are always biased by
mirror and <em>vdc</em> biasing don't give the right result in global
variation Monte Carlo simulation (<em>542.8n</em> is too pessimistic,
<em>13.07p</em> is right result)</p>
</blockquote>
<h2 id="operating-points-small-gain-theorem">Operating points &amp;
Small gain theorem</h2>
<blockquote>
<p>Dr. Degang Chen, <strong>EE 501:</strong> <strong>CMOS Analog
Integrated Circuit Design</strong> [<a
target="_blank" rel="noopener" href="https://class.ece.iastate.edu/djchen/ee501/2020/References.ppt">https://class.ece.iastate.edu/djchen/ee501/2020/References.ppt</a>]</p>
</blockquote>
<p><img src="/2024/07/27/biasing/image-20231202102259692.png"
alt="image-20231202102259692" /></p>
<p>For any given constant values of <em>u</em> and <em>v</em>, the
constant values of variables that solve the the feed back relationship
are called the <strong>operating points</strong>, or <strong>equilibrium
points</strong>.</p>
<blockquote>
<p><em>Operating points</em> can be either <em>stable</em> or
<em>unstable</em>.</p>
<p>An operating point is unstable if any or some small perturbation near
it causes divergence away from that operating point.</p>
</blockquote>
<p>If the loop gain evaluated at an operating point is <strong>less than
one</strong>, that operating point is <strong>stable</strong>.</p>
<blockquote>
<p>This is a sufficient condition</p>
</blockquote>
<p><img src="/2024/07/27/biasing/image-20231202105749888.png"
alt="image-20231202105749888" /></p>
<p><img src="/2024/07/27/biasing/image-20231202105621385.png"
alt="image-20231202105621385" /></p>
<p>With <span class="math inline">\(m_{1\to 2} = 1\)</span> <span
class="math display">\[
\text{Loop Gain} \simeq \frac{V_{BN}-V_{T2}}{V_{BN}-V_{T2} + V_R}
\tag{LG\_0}
\]</span> Assuming all MOS in strong inv operation, <span
class="math inline">\(I\)</span>, <span
class="math inline">\(V_{BN}\)</span> and <span
class="math inline">\(V_R\)</span> is obtain <span
class="math display">\[\begin{align}
I &amp;= \frac{2\beta _1 + 2\beta _2 - 4\sqrt{\beta _1 \beta
_2}}{R^2\beta _1 \beta _2} \\
V_{BN} &amp;= V_{T2} + \frac{2}{R\beta _2}(1- \sqrt{\frac{\beta
_2}{\beta _1}}) \\
IR &amp;= \frac{2}{R}\left( \frac{1}{\sqrt{\beta_2}}
-  \frac{1}{\sqrt{\beta_1}} \right)
\end{align}\]</span></p>
<p>Substitute <span class="math inline">\(V_{BN}\)</span> and <span
class="math inline">\(V_R\)</span> of <span
class="math inline">\((LG\_0)\)</span> <span
class="math display">\[\begin{align}
\text{Loop Gain} &amp; \simeq
\frac{1-\sqrt{\frac{\beta_2}{\beta_1}}}{\frac{\beta_2}{\beta_1} -
3\sqrt{\frac{\beta_2}{\beta_1}}+2} \\
&amp;= \frac{1}{2-\sqrt{\frac{\beta_2}{\beta_1}}} \tag{LG\_1}
\end{align}\]</span></p>
<h3 id="alternative-approach-for-loop-gain">Alternative approach for
Loop Gain</h3>
<blockquote>
<p>using derivation of large signal</p>
</blockquote>
<p><img src="/2024/07/27/biasing/image-20231202132310478.png"
alt="image-20231202132310478" /></p>
<p><img src="/2024/07/27/biasing/image-20231202134138319.png"
alt="image-20231202134138319" /></p>
<hr />
<blockquote>
<p>â—â—â— R should <strong>not</strong> be on the other side</p>
</blockquote>
<p><img src="/2024/07/27/biasing/image-20231202104505264.png"
alt="image-20231202104505264" /></p>
<h2 id="self-biasing-cascode">Self-Biasing Cascode</h2>
<p><img src="/2024/07/27/biasing/image-20231212153054247.png"
alt="image-20231212153054247" /></p>
<hr />
<p><img src="/2024/07/27/biasing/cascode_selfbias.drawio.svg"
alt="cascode_selfbias.drawio" /></p>
<hr />
<p><img src="/2024/07/27/biasing/v2i.drawio.svg" alt="v2i.drawio" /></p>
<h2 id="reference">reference</h2>
<p>B. Razavi, "The Design of a Low-Voltage Bandgap Reference [The Analog
Mind]," in <em>IEEE Solid-State Circuits Magazine</em>, vol. 13, no. 3,
pp. 6-16, Summer 2021, doi: 10.1109/MSSC.2021.3088963</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Guo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
